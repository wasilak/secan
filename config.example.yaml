# Secan Configuration File Example
# 
# This is an example configuration file showing all available options.
# Copy this to config.yaml and customize for your environment.
# 
# Note: Environment variables take precedence over config file values.
# See .env.example for environment variable options.

# ============================================================================
# SERVER CONFIGURATION
# ============================================================================

server:
  # Bind address (default: 0.0.0.0)
  host: "0.0.0.0"
  
  # Port (default: 27182)
  port: 27182
  
  # Optional TLS configuration (advanced - typically use reverse proxy)
  # tls:
  #   cert_file: "/etc/secan/cert.pem"
  #   key_file: "/etc/secan/key.pem"


# ============================================================================
# AUTHENTICATION CONFIGURATION
# ============================================================================

auth:
  # Mode: open, local_users, or oidc (default: open)
  mode: open
  
  # Session timeout in minutes (default: 60)
  session_timeout_minutes: 60
  
  # Optional: local_users mode configuration
  # local_users:
  #   - username: "admin"
  #     password_hash: "$2b$12$..." # bcrypt hash
  #     roles:
  #       - "admin"
  
  # Optional: OIDC mode configuration
  # oidc:
  #   discovery_url: "https://auth.example.com/.well-known/openid-configuration"
  #   client_id: "secan"
  #   client_secret: "secret"
  #   redirect_uri: "https://secan.example.com/api/auth/oidc/redirect"
  
  # Optional: role-based access control
  # roles:
  #   - name: "admin"
  #     cluster_patterns:
  #       - "*"  # Access to all clusters
  #   - name: "viewer"
  #     cluster_patterns:
  #       - "production"


# ============================================================================
# CLUSTER CONFIGURATION (REQUIRED)
# ============================================================================

clusters:
  # Example: Single cluster for local development
  - id: "local"
    name: "Local Elasticsearch"
    nodes:
      - "http://localhost:9200"
    es_version: 8

  # Example: Production cluster with authentication
  - id: "production"
    name: "Production Cluster"
    nodes:
      - "http://es1.example.com:9200"
      - "http://es2.example.com:9200"
      - "http://es3.example.com:9200"
    
    # Authentication
    auth:
      type: "basic"
      username: "elastic"
      password: "secure-password"  # Consider using env vars for secrets
    
    # TLS configuration (optional)
    # tls:
    #   verify: true
    #   ca_cert_file: "/path/to/ca.pem"  # Only if you need custom CA
    
    es_version: 8

  # Example: Staging cluster
  - id: "staging"
    name: "Staging Cluster"
    nodes:
      - "http://es-staging.internal:9200"
    auth:
      type: "basic"
      username: "elastic"
      password: "staging-password"
    es_version: 8

  # Example: Cluster with API key auth
  - id: "monitoring"
    name: "Monitoring Cluster"
    nodes:
      - "http://es-monitoring:9200"
    auth:
      type: "api_key"
      key: "VuaCfGcBxxx=="
    es_version: 8


# ============================================================================
# CACHE CONFIGURATION
# ============================================================================

cache:
  # Cluster metadata cache duration in seconds (default: 30)
  metadata_duration_seconds: 30
