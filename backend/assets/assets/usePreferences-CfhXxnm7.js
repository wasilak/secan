import{r as s}from"./index-DMT0gxjb.js";const t={theme:"system",refreshInterval:3e4,lastSelectedCluster:void 0,restConsoleHistory:[]},a="cerebro-preferences";function i(){const c=s.useCallback(()=>{try{const r=localStorage.getItem(a);if(!r)return{...t};const e=JSON.parse(r);return{theme:e.theme==="light"||e.theme==="dark"||e.theme==="system"?e.theme:t.theme,refreshInterval:typeof e.refreshInterval=="number"&&e.refreshInterval>0?e.refreshInterval:t.refreshInterval,lastSelectedCluster:typeof e.lastSelectedCluster=="string"?e.lastSelectedCluster:void 0,restConsoleHistory:Array.isArray(e.restConsoleHistory)?e.restConsoleHistory:t.restConsoleHistory}}catch(r){return console.error("Failed to load preferences from localStorage:",r),console.warn("Using default preferences due to corrupted data"),{...t}}},[]),[o,l]=s.useState(c);s.useEffect(()=>{try{localStorage.setItem(a,JSON.stringify(o))}catch(r){console.error("Failed to save preferences to localStorage:",r)}},[o]);const f=s.useCallback((r,e)=>{l(n=>({...n,[r]:e}))},[]),u=s.useCallback(()=>{l({...t})},[]);return{preferences:o,updatePreference:f,resetPreferences:u}}export{i as u};
