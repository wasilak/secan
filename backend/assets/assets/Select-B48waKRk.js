import{r as c,z as Ce,s as we,W as ye,ac as H,ad as De,j as a}from"./index-c25UbpP-.js";import{g as Oe,a as Ie,u as Pe,C as d,O as je}from"./OptionsDropdown-DWtwpkTL.js";import{I as W}from"./InputBase-DzmF8G_d.js";function Ee(p){const h=c.useRef(void 0);return c.useEffect(()=>{h.current=p},[p]),h.current}const Ve={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},L=Ce((p,h)=>{const k=we("Select",Ve,p),{classNames:U,styles:$,unstyled:f,vars:ke,dropdownOpened:q,defaultDropdownOpened:G,onDropdownClose:_,onDropdownOpen:v,onFocus:C,onBlur:w,onClick:y,onChange:J,data:D,value:b,defaultValue:K,selectFirstOptionOnChange:O,onOptionSubmit:I,comboboxProps:Q,readOnly:g,disabled:m,filter:X,limit:Y,withScrollArea:Z,maxDropdownHeight:ee,size:P,searchable:n,rightSection:te,checkIconPosition:oe,withCheckIcon:le,nothingFoundMessage:F,name:se,form:ae,searchValue:ne,defaultSearchValue:re,onSearchChange:ce,allowDeselect:ie,error:N,rightSectionPointerEvents:ue,id:de,clearable:pe,clearButtonProps:he,hiddenInputProps:fe,renderOption:be,onClear:j,autoComplete:ge,scrollAreaProps:me,__defaultRightSection:Fe,__clearSection:Ne,__clearable:Re,chevronColor:Se,...S}=k,E=c.useMemo(()=>Oe(D),[D]),i=c.useMemo(()=>Ie(E),[E]),R=ye(de),[t,B,A]=H({value:b,defaultValue:K,finalValue:null,onChange:J}),l=typeof t=="string"?i[t]:void 0,u=Ee(l),[x,xe,_e]=H({value:ne,defaultValue:re,finalValue:l?l.label:"",onChange:ce}),o=Pe({opened:q,defaultOpened:G,onDropdownOpen:()=>{v==null||v(),o.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{_==null||_(),o.resetSelectedOption()}}),r=e=>{xe(e),o.resetSelectedOption()},{resolvedClassNames:M,resolvedStyles:T}=De({props:k,styles:$,classNames:U});c.useEffect(()=>{O&&o.selectFirstOption()},[O,x]),c.useEffect(()=>{b===null&&r(""),typeof b=="string"&&l&&((u==null?void 0:u.value)!==l.value||(u==null?void 0:u.label)!==l.label)&&r(l.label)},[b,l]),c.useEffect(()=>{var e;!A&&!_e&&r(typeof t=="string"&&((e=i[t])==null?void 0:e.label)||"")},[D,t]);const ve=a.jsx(d.ClearButton,{...he,onClear:()=>{B(null,null),r(""),j==null||j()}}),z=pe&&!!t&&!m&&!g;return a.jsxs(a.Fragment,{children:[a.jsxs(d,{store:o,__staticSelector:"Select",classNames:M,styles:T,unstyled:f,readOnly:g,onOptionSubmit:e=>{I==null||I(e);const s=ie&&i[e].value===t?null:i[e],V=s?s.value:null;V!==t&&B(V,s),!A&&r(typeof V=="string"&&(s==null?void 0:s.label)||""),o.closeDropdown()},size:P,...Q,children:[a.jsx(d.Target,{targetType:n?"input":"button",autoComplete:ge,children:a.jsx(W,{id:R,ref:h,__defaultRightSection:a.jsx(d.Chevron,{size:P,error:N,unstyled:f,color:Se}),__clearSection:ve,__clearable:z,rightSection:te,rightSectionPointerEvents:ue||(z?"all":"none"),...S,size:P,__staticSelector:"Select",disabled:m,readOnly:g||!n,value:x,onChange:e=>{r(e.currentTarget.value),o.openDropdown(),O&&o.selectFirstOption()},onFocus:e=>{n&&o.openDropdown(),C==null||C(e)},onBlur:e=>{var s;n&&o.closeDropdown(),r(t!=null&&((s=i[t])==null?void 0:s.label)||""),w==null||w(e)},onClick:e=>{n?o.openDropdown():o.toggleDropdown(),y==null||y(e)},classNames:M,styles:T,unstyled:f,pointer:!n,error:N})}),a.jsx(je,{data:E,hidden:g||m,filter:X,search:x,limit:Y,hiddenWhenEmpty:!F,withScrollArea:Z,maxDropdownHeight:ee,filterOptions:n&&(l==null?void 0:l.label)!==x,value:t,checkIconPosition:oe,withCheckIcon:le,nothingFoundMessage:F,unstyled:f,labelId:S.label?`${R}-label`:void 0,"aria-label":S.label?void 0:S["aria-label"],renderOption:be,scrollAreaProps:me})]}),a.jsx(d.HiddenInput,{value:t,name:se,form:ae,disabled:m,...fe})]})});L.classes={...W.classes,...d.classes};L.displayName="@mantine/core/Select";export{L as S};
