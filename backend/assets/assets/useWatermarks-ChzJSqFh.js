import{k as w,o as p}from"./index-wy-2YrwR.js";const i={low:85,high:90,floodStage:95};function d(e,t){if(!e)return t;if(e.endsWith("%")){const r=parseFloat(e);return isNaN(r)?t:r}return t}function m(e){const t=e.transient,r=e.persistent,a=e.defaults,o=s=>{for(const n of[t,r,a]){if(!n)continue;const u=n.cluster,f=u==null?void 0:u.routing,c=f==null?void 0:f.allocation,l=c==null?void 0:c.disk,g=l==null?void 0:l.watermark,h=g==null?void 0:g[s];if(h!==void 0)return String(h)}};return{low:d(o("low"),i.low),high:d(o("high"),i.high),floodStage:d(o("flood_stage"),i.floodStage)}}function W(e,t){return e>=t.floodStage?"red":e>=t.high?"orange":e>=t.low?"yellow":"blue"}function k(e,t=!0){const{data:r,isLoading:a,error:o}=w({queryKey:["cluster",e,"watermarks"],queryFn:async()=>{if(!e)throw new Error("Cluster ID is required");return await p.proxyRequest(e,"GET","/_cluster/settings?include_defaults=true&flat_settings=false")},enabled:t&&!!e,staleTime:3e5,refetchOnWindowFocus:!1}),s=r?m(r):i;return{watermarks:s,isLoading:a,error:o,getColor:n=>W(n,s)}}export{k as u};
