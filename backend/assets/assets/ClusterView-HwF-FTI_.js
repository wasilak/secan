import{c as ue,r as de,h as fe,i as Ce,n as b,f as N,j as e,M as j,k as V,l as Q,m as Pe,o as Fe,p as Te,S as C,d as t,G as x,q as xe,a as Ne,s as ie,b as J,A as ee,I as se,L as ae,T as Ae,u as ye,t as ge,v as je,e as a,w as we,x as Le,y as Ue}from"./index-DXhoNqGj.js";import{u as B}from"./useMutation-5AqAzS6h.js";import{u as Ie}from"./useWatermarks-DM87aVS_.js";import{u as De}from"./accessibility-a-3lr5c_.js";import{I as Oe}from"./IconDeviceFloppy-DPmJjqGM.js";import{I as Re}from"./IconTrash-BwrosuEY.js";import{T as te}from"./TextInput-CmFVpXHk.js";import{B as Y}from"./Button-BgNt1bMR.js";import{N as qe}from"./NumberInput-DJRFeQjO.js";import{P as ne}from"./Progress-CEegSZOp.js";import{G as W}from"./Grid-BXW_Lw7X.js";import{C as H}from"./Card-OCnhajm6.js";import{T as G}from"./Tabs-BLKHrLLa.js";import{I as ke,a as _,b as $e,c as Me,C as he}from"./IconMinimize-BikgtE-C.js";import{B as L}from"./Badge-C7HiQUzD.js";import{M as me}from"./MultiSelect-CJdQdxV5.js";import{I as Be,a as Ge}from"./IconSortDescending-COcDUA7j.js";import"./get-auto-contrast-value-Da6zqqWm.js";import"./get-safe-id-Bp3H8K0-.js";import"./InputsGroupFieldset-CmNItEpd.js";var Ee=ue("dots","IconDots",[["path",{d:"M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]),We=ue("eraser","IconEraser",[["path",{d:"M19 20h-10.5l-4.21 -4.3a1 1 0 0 1 0 -1.41l10 -10a1 1 0 0 1 1.41 0l5 5a1 1 0 0 1 0 1.41l-9.2 9.3",key:"svg-0"}],["path",{d:"M18 13.3l-6.3 -6.3",key:"svg-1"}]]),Ke=ue("folder-off","IconFolderOff",[["path",{d:"M8 4h1l3 3h7a2 2 0 0 1 2 2v8m-2 2h-14a2 2 0 0 1 -2 -2v-11a2 2 0 0 1 1.189 -1.829",key:"svg-0"}],["path",{d:"M3 3l18 18",key:"svg-1"}]]),Qe=ue("folder-open","IconFolderOpen",[["path",{d:"M5 19l2.757 -7.351a1 1 0 0 1 .936 -.649h12.307a1 1 0 0 1 .986 1.164l-.996 5.211a2 2 0 0 1 -1.964 1.625h-14.026a2 2 0 0 1 -2 -2v-11a2 2 0 0 1 2 -2h4l3 3h7a2 2 0 0 1 2 2v2",key:"svg-0"}]]);function pe(l,n=300){const[T,h]=de.useState(l);return de.useEffect(()=>{const M=setTimeout(()=>{h(l)},n);return()=>{clearTimeout(M)}},[l,n]),T}function Ve({clusterId:l,index:n}){const T=fe(),{announceSuccess:h,announceError:M}=De(),[z,{open:$,close:I}]=Ce(!1),[r,{open:A,close:k}]=Ce(!1),[u,E]=de.useState(""),[w,c]=de.useState(1),o=B({mutationFn:()=>N.openIndex(l,n.name),onMutate:()=>{b.show({id:`open-${n.name}`,title:"Opening index",message:`Opening index ${n.name}...`,loading:!0,autoClose:!1})},onSuccess:()=>{b.update({id:`open-${n.name}`,title:"Success",message:`Index ${n.name} opened successfully`,color:"green",loading:!1,autoClose:3e3}),h(`Index ${n.name} opened successfully`),T.invalidateQueries({queryKey:["cluster",l,"indices"]})},onError:y=>{b.update({id:`open-${n.name}`,title:"Error",message:`Failed to open index: ${y.message}`,color:"red",loading:!1,autoClose:5e3}),M(`Failed to open index: ${y.message}`)}}),p=B({mutationFn:()=>N.closeIndex(l,n.name),onMutate:()=>{b.show({id:`close-${n.name}`,title:"Closing index",message:`Closing index ${n.name}...`,loading:!0,autoClose:!1})},onSuccess:()=>{b.update({id:`close-${n.name}`,title:"Success",message:`Index ${n.name} closed successfully`,color:"green",loading:!1,autoClose:3e3}),T.invalidateQueries({queryKey:["cluster",l,"indices"]})},onError:y=>{b.update({id:`close-${n.name}`,title:"Error",message:`Failed to close index: ${y.message}`,color:"red",loading:!1,autoClose:5e3})}}),f=B({mutationFn:()=>N.deleteIndex(l,n.name),onMutate:()=>{b.show({id:`delete-${n.name}`,title:"Deleting index",message:`Deleting index ${n.name}...`,loading:!0,autoClose:!1})},onSuccess:()=>{b.update({id:`delete-${n.name}`,title:"Success",message:`Index ${n.name} deleted successfully`,color:"green",loading:!1,autoClose:3e3}),T.invalidateQueries({queryKey:["cluster",l,"indices"]}),I(),E("")},onError:y=>{b.update({id:`delete-${n.name}`,title:"Error",message:`Failed to delete index: ${y.message}`,color:"red",loading:!1,autoClose:5e3})}}),v=B({mutationFn:y=>N.forceMergeIndex(l,n.name,y),onMutate:()=>{b.show({id:`forcemerge-${n.name}`,title:"Force merging index",message:`Force merging index ${n.name}...`,loading:!0,autoClose:!1})},onSuccess:()=>{b.update({id:`forcemerge-${n.name}`,title:"Success",message:`Index ${n.name} force merged successfully`,color:"green",loading:!1,autoClose:3e3}),k(),c(1)},onError:y=>{b.update({id:`forcemerge-${n.name}`,title:"Error",message:`Failed to force merge index: ${y.message}`,color:"red",loading:!1,autoClose:5e3})}}),U=B({mutationFn:()=>N.clearCacheIndex(l,n.name),onMutate:()=>{b.show({id:`clearcache-${n.name}`,title:"Clearing cache",message:`Clearing cache for index ${n.name}...`,loading:!0,autoClose:!1})},onSuccess:()=>{b.update({id:`clearcache-${n.name}`,title:"Success",message:`Cache cleared for index ${n.name}`,color:"green",loading:!1,autoClose:3e3})},onError:y=>{b.update({id:`clearcache-${n.name}`,title:"Error",message:`Failed to clear cache: ${y.message}`,color:"red",loading:!1,autoClose:5e3})}}),D=B({mutationFn:()=>N.refreshIndex(l,n.name),onMutate:()=>{b.show({id:`refresh-${n.name}`,title:"Refreshing index",message:`Refreshing index ${n.name}...`,loading:!0,autoClose:!1})},onSuccess:()=>{b.update({id:`refresh-${n.name}`,title:"Success",message:`Index ${n.name} refreshed successfully`,color:"green",loading:!1,autoClose:3e3})},onError:y=>{b.update({id:`refresh-${n.name}`,title:"Error",message:`Failed to refresh index: ${y.message}`,color:"red",loading:!1,autoClose:5e3})}}),P=B({mutationFn:()=>N.flushIndex(l,n.name),onMutate:()=>{b.show({id:`flush-${n.name}`,title:"Flushing index",message:`Flushing index ${n.name}...`,loading:!0,autoClose:!1})},onSuccess:()=>{b.update({id:`flush-${n.name}`,title:"Success",message:`Index ${n.name} flushed successfully`,color:"green",loading:!1,autoClose:3e3})},onError:y=>{b.update({id:`flush-${n.name}`,title:"Error",message:`Failed to flush index: ${y.message}`,color:"red",loading:!1,autoClose:5e3})}}),re=()=>{u===n.name&&f.mutate()},X=()=>{const y=typeof w=="number"?w:parseInt(w,10);!isNaN(y)&&y>0&&v.mutate(y)};return e.jsxs(e.Fragment,{children:[e.jsxs(j,{shadow:"md",width:200,children:[e.jsx(j.Target,{children:e.jsx(V,{label:"Index operations",children:e.jsx(Q,{variant:"subtle",color:"gray","aria-label":`Operations for index ${n.name}`,children:e.jsx(Ee,{size:16,"aria-hidden":"true"})})})}),e.jsxs(j.Dropdown,{children:[e.jsx(j.Label,{children:"Index Operations"}),n.status==="close"?e.jsx(j.Item,{leftSection:e.jsx(Qe,{size:14,"aria-hidden":"true"}),onClick:()=>o.mutate(),disabled:o.isPending,children:"Open Index"}):e.jsx(j.Item,{leftSection:e.jsx(Ke,{size:14,"aria-hidden":"true"}),onClick:()=>p.mutate(),disabled:p.isPending,children:"Close Index"}),e.jsx(j.Item,{leftSection:e.jsx(Pe,{size:14,"aria-hidden":"true"}),onClick:()=>D.mutate(),disabled:D.isPending,children:"Refresh"}),e.jsx(j.Item,{leftSection:e.jsx(Oe,{size:14,"aria-hidden":"true"}),onClick:()=>P.mutate(),disabled:P.isPending,children:"Flush"}),e.jsx(j.Item,{leftSection:e.jsx(We,{size:14,"aria-hidden":"true"}),onClick:()=>U.mutate(),disabled:U.isPending,children:"Clear Cache"}),e.jsx(j.Item,{leftSection:e.jsx(Fe,{size:14,"aria-hidden":"true"}),onClick:A,children:"Force Merge"}),e.jsx(j.Divider,{}),e.jsx(j.Item,{leftSection:e.jsx(Re,{size:14,"aria-hidden":"true"}),color:"red",onClick:$,children:"Delete Index"})]})]}),e.jsx(Te,{opened:z,onClose:()=>{I(),E("")},title:"Delete Index",centered:!0,"aria-labelledby":"delete-modal-title","aria-describedby":"delete-modal-description",children:e.jsxs(C,{gap:"md",children:[e.jsxs(t,{size:"sm",id:"delete-modal-description",children:["Are you sure you want to delete index ",e.jsx(t,{span:!0,fw:700,children:n.name}),"? This action cannot be undone."]}),e.jsx(t,{size:"sm",c:"dimmed",children:"Type the index name to confirm:"}),e.jsx(te,{placeholder:n.name,value:u,onChange:y=>E(y.currentTarget.value),"data-autofocus":!0,"aria-label":"Confirm index name","aria-required":"true"}),e.jsxs(x,{justify:"flex-end",children:[e.jsx(Y,{variant:"default",onClick:()=>{I(),E("")},children:"Cancel"}),e.jsx(Y,{color:"red",onClick:re,disabled:u!==n.name||f.isPending,loading:f.isPending,"aria-label":`Delete index ${n.name}`,children:"Delete"})]})]})}),e.jsx(Te,{opened:r,onClose:()=>{k(),c(1)},title:"Force Merge Index",centered:!0,"aria-labelledby":"forcemerge-modal-title","aria-describedby":"forcemerge-modal-description",children:e.jsxs(C,{gap:"md",children:[e.jsxs(t,{size:"sm",id:"forcemerge-modal-description",children:["Force merge index ",e.jsx(t,{span:!0,fw:700,children:n.name})," to reduce the number of segments."]}),e.jsx(qe,{label:"Maximum number of segments",description:"The number of segments to merge to. Set to 1 for a single segment.",placeholder:"1",value:w,onChange:c,min:1,max:100,"aria-label":"Maximum number of segments","aria-required":"true"}),e.jsxs(x,{justify:"flex-end",children:[e.jsx(Y,{variant:"default",onClick:()=>{k(),c(1)},children:"Cancel"}),e.jsx(Y,{onClick:X,disabled:v.isPending,loading:v.isPending,"aria-label":`Force merge index ${n.name}`,children:"Force Merge"})]})]})})]})}function ve(l){switch(l){case"green":return"green";case"yellow":return"yellow";case"red":return"red";default:return"gray"}}function q(l){if(l===0)return"0 B";const n=1024,T=["B","KB","MB","GB","TB"],h=Math.floor(Math.log(l)/Math.log(n));return`${(l/Math.pow(n,h)).toFixed(2)} ${T[h]}`}function K(l,n){return n===0?0:Math.round(l/n*100)}function ze(l){switch(l){case"green":return"transparent";case"yellow":return"rgba(250, 176, 5, 0.15)";case"red":return"rgba(250, 82, 82, 0.15)";default:return"transparent"}}function ys(){var D;const{id:l}=xe(),n=Ne(),[T,h]=ie(),{getColor:M}=Ie(l),z=T.get("tab")||"overview",$=P=>{P&&h({tab:P})},I=P=>{h({tab:P})},{data:r,isLoading:A,error:k}=J({queryKey:["cluster",l,"stats"],queryFn:()=>N.getClusterStats(l),refetchInterval:n,enabled:!!l}),{data:u,isLoading:E,error:w}=J({queryKey:["cluster",l,"nodes"],queryFn:()=>N.getNodes(l),refetchInterval:n,enabled:!!l}),{data:c,isLoading:o,error:p}=J({queryKey:["cluster",l,"indices"],queryFn:()=>N.getIndices(l),refetchInterval:n,enabled:!!l}),{data:f,isLoading:v,error:U}=J({queryKey:["cluster",l,"shards"],queryFn:()=>N.getShards(l),refetchInterval:n,enabled:!!l});return l?A?e.jsx(C,{p:"md",children:e.jsx(x,{justify:"center",mt:"xl",children:e.jsx(ae,{size:"lg"})})}):k?e.jsx(C,{p:"md",children:e.jsxs(ee,{icon:e.jsx(se,{size:16}),title:"Error",color:"red",children:["Failed to load cluster information: ",k.message]})}):e.jsxs(C,{gap:"md",p:"md",children:[e.jsx(x,{justify:"space-between",wrap:"wrap",children:e.jsxs("div",{children:[e.jsx(Ae,{order:1,className:"text-responsive-xl",children:(r==null?void 0:r.clusterName)||l}),e.jsx(t,{size:"sm",c:"dimmed",children:"Cluster Overview"})]})}),e.jsx(ne,{value:100,color:ve((r==null?void 0:r.health)||"red"),size:"sm",radius:"xs","aria-label":`Cluster health: ${(r==null?void 0:r.health)||"unknown"}`}),e.jsxs(W,{children:[e.jsx(W.Col,{span:{base:12,sm:6,md:3},children:e.jsx(H,{shadow:"sm",padding:"lg",style:{cursor:"pointer"},onClick:()=>I("nodes"),children:e.jsxs(C,{gap:"xs",children:[e.jsx(t,{size:"sm",c:"dimmed",children:"Nodes"}),e.jsx(t,{size:"xl",fw:700,children:(r==null?void 0:r.numberOfNodes)||0}),e.jsxs(t,{size:"xs",c:"dimmed",children:[(r==null?void 0:r.numberOfDataNodes)||0," data nodes"]})]})})}),e.jsx(W.Col,{span:{base:12,sm:6,md:3},children:e.jsx(H,{shadow:"sm",padding:"lg",style:{cursor:"pointer"},onClick:()=>I("indices"),children:e.jsxs(C,{gap:"xs",children:[e.jsx(t,{size:"sm",c:"dimmed",children:"Indices"}),e.jsx(t,{size:"xl",fw:700,children:(r==null?void 0:r.numberOfIndices)||0}),e.jsxs(t,{size:"xs",c:"dimmed",children:[((D=r==null?void 0:r.numberOfDocuments)==null?void 0:D.toLocaleString())||0," documents"]})]})})}),e.jsx(W.Col,{span:{base:12,sm:6,md:3},children:e.jsx(H,{shadow:"sm",padding:"lg",style:{cursor:"pointer"},onClick:()=>I("shards"),children:e.jsxs(C,{gap:"xs",children:[e.jsx(t,{size:"sm",c:"dimmed",children:"Shards"}),e.jsx(t,{size:"xl",fw:700,children:(r==null?void 0:r.activeShards)||0}),e.jsxs(t,{size:"xs",c:"dimmed",children:[(r==null?void 0:r.activePrimaryShards)||0," primary"]})]})})}),e.jsx(W.Col,{span:{base:12,sm:6,md:3},children:e.jsx(H,{shadow:"sm",padding:"lg",style:{cursor:"pointer"},onClick:()=>I("shards"),children:e.jsxs(C,{gap:"xs",children:[e.jsx(t,{size:"sm",c:"dimmed",children:"Unassigned"}),e.jsx(t,{size:"xl",fw:700,c:r!=null&&r.unassignedShards?"red":void 0,children:(r==null?void 0:r.unassignedShards)||0}),e.jsxs(t,{size:"xs",c:"dimmed",children:[(r==null?void 0:r.relocatingShards)||0," relocating"]})]})})})]}),((r==null?void 0:r.memoryTotal)||(r==null?void 0:r.diskTotal))&&e.jsxs(W,{children:[(r==null?void 0:r.memoryTotal)&&e.jsx(W.Col,{span:{base:12,md:6},children:e.jsx(H,{shadow:"sm",padding:"lg",children:e.jsxs(C,{gap:"xs",children:[e.jsx(t,{size:"sm",c:"dimmed",children:"Memory Usage"}),e.jsx(ne,{value:K(r.memoryUsed||0,r.memoryTotal),color:M(K(r.memoryUsed||0,r.memoryTotal)),size:"sm",radius:"xs"}),e.jsxs(t,{size:"xs",c:"dimmed",children:[q(r.memoryUsed||0)," / ",q(r.memoryTotal)," (",K(r.memoryUsed||0,r.memoryTotal),"%)"]})]})})}),(r==null?void 0:r.diskTotal)&&e.jsx(W.Col,{span:{base:12,md:6},children:e.jsx(H,{shadow:"sm",padding:"lg",children:e.jsxs(C,{gap:"xs",children:[e.jsx(t,{size:"sm",c:"dimmed",children:"Disk Usage"}),e.jsx(ne,{value:K(r.diskUsed||0,r.diskTotal),color:M(K(r.diskUsed||0,r.diskTotal)),size:"sm",radius:"xs"}),e.jsxs(t,{size:"xs",c:"dimmed",children:[q(r.diskUsed||0)," / ",q(r.diskTotal)," (",K(r.diskUsed||0,r.diskTotal),"%)"]})]})})})]}),e.jsx(H,{shadow:"sm",padding:"lg",children:e.jsxs(G,{value:z,onChange:$,children:[e.jsxs(G.List,{children:[e.jsx(G.Tab,{value:"overview",children:"Overview"}),e.jsxs(G.Tab,{value:"nodes",children:["Nodes (",(u==null?void 0:u.length)||0,")"]}),e.jsxs(G.Tab,{value:"indices",children:["Indices (",(c==null?void 0:c.length)||0,")"]}),e.jsxs(G.Tab,{value:"shards",children:["Shards (",(f==null?void 0:f.length)||0,")"]})]}),e.jsx(G.Panel,{value:"overview",pt:"md",children:e.jsx(Ze,{nodes:u,indices:c,shards:f,loading:E||o||v,error:w||p||U})}),e.jsx(G.Panel,{value:"nodes",pt:"md",children:e.jsx(He,{nodes:u,loading:E,error:w})}),e.jsx(G.Panel,{value:"indices",pt:"md",children:e.jsx(_e,{indices:c,loading:o,error:p})}),e.jsx(G.Panel,{value:"shards",pt:"md",children:e.jsx(Je,{shards:f,loading:v,error:U})})]})})]}):e.jsx(C,{p:"md",children:e.jsx(ee,{icon:e.jsx(se,{size:16}),title:"Error",color:"red",children:"Cluster ID is required"})})}function He({nodes:l,loading:n,error:T}){var c;const{id:h}=xe(),M=ye(),[z,$]=ie(),{getColor:I}=Ie(h),r=z.get("nodesSearch")||"",A=((c=z.get("roles"))==null?void 0:c.split(",").filter(Boolean))||[],k=pe(r,300),u=(o,p)=>{const f=new URLSearchParams(z);o!==void 0&&(o?f.set("nodesSearch",o):f.delete("nodesSearch")),p!==void 0&&(p.length>0?f.set("roles",p.join(",")):f.delete("roles")),$(f)},E=Array.from(new Set((l==null?void 0:l.flatMap(o=>o.roles))||[])),w=l==null?void 0:l.filter(o=>{var v;const p=o.name.toLowerCase().includes(k.toLowerCase())||((v=o.ip)==null?void 0:v.toLowerCase().includes(k.toLowerCase())),f=A.length===0||A.some(U=>o.roles.includes(U));return p&&f});return n?e.jsx(x,{justify:"center",py:"xl",children:e.jsx(ae,{})}):T?e.jsxs(ee,{icon:e.jsx(se,{size:16}),title:"Error",color:"red",children:["Failed to load nodes: ",T.message]}):!l||l.length===0?e.jsx(t,{c:"dimmed",children:"No nodes found"}):e.jsxs(C,{gap:"md",children:[e.jsxs(x,{children:[e.jsx(te,{placeholder:"Search nodes...",leftSection:e.jsx(ge,{size:16}),value:r,onChange:o=>u(o.currentTarget.value,void 0),style:{flex:1,maxWidth:400}}),e.jsx(me,{placeholder:"Filter by roles",data:E,value:A,onChange:o=>u(void 0,o),clearable:!0,searchable:!0,style:{flex:1,maxWidth:300}})]}),w&&w.length===0?e.jsx(t,{c:"dimmed",ta:"center",py:"xl",children:"No nodes match your filters"}):e.jsx(je,{children:e.jsxs(a,{striped:!0,highlightOnHover:!0,children:[e.jsx(a.Thead,{children:e.jsxs(a.Tr,{children:[e.jsx(a.Th,{children:"Name"}),e.jsx(a.Th,{children:"Roles"}),e.jsx(a.Th,{children:"Heap Usage"}),e.jsx(a.Th,{children:"Disk Usage"}),e.jsx(a.Th,{children:"CPU"})]})}),e.jsx(a.Tbody,{children:w==null?void 0:w.map(o=>e.jsxs(a.Tr,{style:{cursor:"pointer"},onClick:()=>M(`/cluster/${h}/nodes/${o.id}`),children:[e.jsxs(a.Td,{children:[e.jsx(t,{size:"sm",fw:500,children:o.name}),o.ip&&e.jsx(t,{size:"xs",c:"dimmed",children:o.ip})]}),e.jsx(a.Td,{children:e.jsx(x,{gap:"xs",children:o.roles.map(p=>e.jsx(L,{size:"sm",variant:"light",children:p},p))})}),e.jsx(a.Td,{children:e.jsxs(C,{gap:4,children:[e.jsx(ne,{value:K(o.heapUsed,o.heapMax),color:I(K(o.heapUsed,o.heapMax)),size:"sm",radius:"xs"}),e.jsxs(t,{size:"xs",c:"dimmed",children:[q(o.heapUsed)," / ",q(o.heapMax)]})]})}),e.jsx(a.Td,{children:e.jsxs(C,{gap:4,children:[e.jsx(ne,{value:K(o.diskUsed,o.diskTotal),color:I(K(o.diskUsed,o.diskTotal)),size:"sm",radius:"xs"}),e.jsxs(t,{size:"xs",c:"dimmed",children:[q(o.diskUsed)," / ",q(o.diskTotal)]})]})}),e.jsx(a.Td,{children:e.jsx(t,{size:"sm",children:o.cpuPercent!==void 0?`${o.cpuPercent}%`:"N/A"})})]},o.id))})]})})]})}function _e({indices:l,loading:n,error:T}){var g,m;const{id:h}=xe(),M=ye(),z=fe(),[$,I]=ie(),r=$.get("indicesSearch")||"",A=((g=$.get("health"))==null?void 0:g.split(",").filter(Boolean))||[],k=((m=$.get("status"))==null?void 0:m.split(",").filter(Boolean))||[],u=$.get("expanded")==="true",E=$.get("sort")!=="desc",w=$.get("affected")==="true",c=pe(r,300),{data:o}=J({queryKey:["cluster",h,"shards"],queryFn:()=>N.getShards(h),enabled:!!h}),{data:p}=J({queryKey:["cluster",h,"settings"],queryFn:async()=>await N.proxyRequest(h,"GET","/_cluster/settings"),enabled:!!h}),f=(()=>{var be,Se;if(!p)return!0;const i=p.transient,d=p.persistent,S=i==null?void 0:i.cluster,F=d==null?void 0:d.cluster,R=S==null?void 0:S.routing,le=F==null?void 0:F.routing,oe=(be=R==null?void 0:R.allocation)==null?void 0:be.enable,ce=(Se=le==null?void 0:le.allocation)==null?void 0:Se.enable;return(oe||ce||"all")==="all"})(),v=B({mutationFn:()=>N.proxyRequest(h,"PUT","/_cluster/settings",{transient:{"cluster.routing.allocation.enable":"all"}}),onSuccess:()=>{z.invalidateQueries({queryKey:["cluster",h,"settings"]}),b.show({title:"Success",message:"Shard allocation enabled",color:"green"})},onError:i=>{b.show({title:"Error",message:`Failed to enable shard allocation: ${i.message}`,color:"red"})}}),U=B({mutationFn:i=>N.proxyRequest(h,"PUT","/_cluster/settings",{transient:{"cluster.routing.allocation.enable":i}}),onSuccess:()=>{z.invalidateQueries({queryKey:["cluster",h,"settings"]}),b.show({title:"Success",message:"Shard allocation disabled",color:"green"})},onError:i=>{b.show({title:"Error",message:`Failed to disable shard allocation: ${i.message}`,color:"red"})}}),D=(i,d,S)=>{const F=new URLSearchParams($);i!==void 0&&(i?F.set("indicesSearch",i):F.delete("indicesSearch")),d!==void 0&&(d.length>0?F.set("health",d.join(",")):F.delete("health")),S!==void 0&&(S.length>0?F.set("status",S.join(",")):F.delete("status")),I(F)},P=(i,d)=>{const S=new URLSearchParams($);d===""||d===!1?S.delete(i):S.set(i,String(d)),I(S)},re=(o==null?void 0:o.reduce((i,d)=>(i[d.index]||(i[d.index]=[]),i[d.index].push(d),i),{}))||{},X=(o==null?void 0:o.filter(i=>i.state==="UNASSIGNED"))||[],y=X.reduce((i,d)=>(i[d.index]||(i[d.index]=[]),i[d.index].push(d),i),{}),Z=i=>(re[i]||[]).some(S=>S.state==="UNASSIGNED"||S.state==="RELOCATING"||S.state==="INITIALIZING");let O=l==null?void 0:l.filter(i=>{const d=i.name.toLowerCase().includes(c.toLowerCase()),S=A.length===0||A.includes(i.health),F=k.length===0||k.includes(i.status),R=!w||Z(i.name);return d&&S&&F&&R});if(O&&(O=[...O].sort((i,d)=>E?i.name.localeCompare(d.name):d.name.localeCompare(i.name))),n)return e.jsx(x,{justify:"center",py:"xl",children:e.jsx(ae,{})});if(T)return e.jsxs(ee,{icon:e.jsx(se,{size:16}),title:"Error",color:"red",children:["Failed to load indices: ",T.message]});if(!l||l.length===0)return e.jsxs(C,{gap:"md",align:"center",py:"xl",children:[e.jsx(t,{c:"dimmed",children:"No indices found"}),h&&e.jsx(Y,{leftSection:e.jsx(we,{size:16}),onClick:()=>M(`/cluster/${h}/indices/create`),children:"Create Index"})]});const s=X.length>0;return e.jsxs(C,{gap:"md",children:[e.jsxs(x,{justify:"space-between",wrap:"wrap",children:[e.jsxs(x,{children:[f?e.jsxs(j,{shadow:"md",width:200,children:[e.jsx(j.Target,{children:e.jsx(V,{label:"Disable shard allocation",children:e.jsx(Q,{size:"lg",variant:"subtle",color:"green",loading:U.isPending,children:e.jsx(ke,{size:20})})})}),e.jsxs(j.Dropdown,{children:[e.jsx(j.Label,{children:"Disable Allocation"}),e.jsx(j.Item,{onClick:()=>U.mutate("none"),children:e.jsxs(x,{gap:"xs",children:[e.jsx(_,{size:14}),e.jsx(t,{size:"sm",children:"None (default)"})]})}),e.jsx(j.Item,{onClick:()=>U.mutate("primaries"),children:e.jsxs(x,{gap:"xs",children:[e.jsx(_,{size:14}),e.jsx(t,{size:"sm",children:"Primaries only"})]})}),e.jsx(j.Item,{onClick:()=>U.mutate("new_primaries"),children:e.jsxs(x,{gap:"xs",children:[e.jsx(_,{size:14}),e.jsx(t,{size:"sm",children:"New primaries only"})]})})]})]}):e.jsx(V,{label:"Enable shard allocation",children:e.jsx(Q,{size:"lg",variant:"subtle",color:"red",onClick:()=>v.mutate(),loading:v.isPending,children:e.jsx(_,{size:20})})}),e.jsx(V,{label:u?"Compress view":"Expand view",children:e.jsx(Q,{size:"lg",variant:"subtle",onClick:()=>P("expanded",!u),children:u?e.jsx($e,{size:20}):e.jsx(Me,{size:20})})}),e.jsx(V,{label:E?"Sort descending":"Sort ascending",children:e.jsx(Q,{size:"lg",variant:"subtle",onClick:()=>P("sort",E?"desc":"asc"),children:E?e.jsx(Be,{size:20}):e.jsx(Ge,{size:20})})})]}),e.jsxs(x,{style:{flex:1},children:[e.jsx(te,{placeholder:"Search indices...",leftSection:e.jsx(ge,{size:16}),value:r,onChange:i=>D(i.currentTarget.value,void 0,void 0),style:{flex:1,maxWidth:300}}),e.jsx(me,{placeholder:"Health",data:["green","yellow","red"],value:A,onChange:i=>D(void 0,i,void 0),clearable:!0,style:{maxWidth:200}}),e.jsx(me,{placeholder:"Status",data:["open","close"],value:k,onChange:i=>D(void 0,void 0,i),clearable:!0,style:{maxWidth:150}}),s&&e.jsx(he,{label:"Show only affected",checked:w,onChange:i=>P("affected",i.currentTarget.checked)})]}),h&&e.jsx(Y,{leftSection:e.jsx(we,{size:16}),onClick:()=>M(`/cluster/${h}/indices/create`),children:"Create Index"})]}),O&&O.length===0?e.jsx(t,{c:"dimmed",ta:"center",py:"xl",children:"No indices match your filters"}):e.jsx(je,{children:e.jsxs(a,{striped:!0,highlightOnHover:!0,children:[e.jsx(a.Thead,{children:e.jsxs(a.Tr,{children:[e.jsx(a.Th,{children:"Name"}),e.jsx(a.Th,{children:"Health"}),e.jsx(a.Th,{children:"Status"}),e.jsx(a.Th,{children:"Documents"}),e.jsx(a.Th,{children:"Size"}),e.jsx(a.Th,{children:"Shards"}),u&&e.jsx(a.Th,{children:"Primaries"}),u&&e.jsx(a.Th,{children:"Replicas"}),e.jsx(a.Th,{children:"Unassigned"}),e.jsx(a.Th,{children:"Actions"})]})}),e.jsx(a.Tbody,{children:O==null?void 0:O.map(i=>{var F;const d=((F=y[i.name])==null?void 0:F.length)||0,S=d>0;return e.jsxs(a.Tr,{style:{cursor:"pointer",backgroundColor:S?"rgba(250, 82, 82, 0.1)":void 0},onClick:()=>M(`/cluster/${h}/indices/${encodeURIComponent(i.name)}/edit`),children:[e.jsx(a.Td,{children:e.jsxs(C,{gap:2,children:[e.jsx(t,{size:"sm",fw:500,style:{textDecoration:"underline"},children:i.name}),u&&Z(i.name)&&e.jsx(L,{size:"xs",color:"yellow",variant:"light",children:"Has Issues"})]})}),e.jsx(a.Td,{children:e.jsx(L,{size:"sm",color:ve(i.health),children:i.health})}),e.jsx(a.Td,{children:e.jsx(L,{size:"sm",variant:"light",color:i.status==="open"?"green":"gray",children:i.status})}),e.jsx(a.Td,{children:e.jsx(t,{size:"sm",children:i.docsCount.toLocaleString()})}),e.jsx(a.Td,{children:e.jsx(t,{size:"sm",children:q(i.storeSize)})}),e.jsx(a.Td,{children:e.jsx(t,{size:"sm",children:u?`${i.primaryShards+i.replicaShards}`:`${i.primaryShards}p / ${i.replicaShards}r`})}),u&&e.jsx(a.Td,{children:e.jsx(t,{size:"sm",children:i.primaryShards})}),u&&e.jsx(a.Td,{children:e.jsx(t,{size:"sm",children:i.replicaShards})}),e.jsx(a.Td,{children:d>0?e.jsx(L,{size:"sm",color:"red",variant:"filled",children:d}):e.jsx(t,{size:"sm",c:"dimmed",children:"-"})}),e.jsx(a.Td,{onClick:R=>R.stopPropagation(),children:e.jsxs(x,{gap:"xs",children:[h&&e.jsx(Ve,{clusterId:h,index:i}),e.jsxs(j,{shadow:"md",width:200,children:[e.jsx(j.Target,{children:e.jsx(Q,{variant:"subtle",color:"gray",children:e.jsx(Ee,{size:16})})}),e.jsxs(j.Dropdown,{children:[e.jsx(j.Label,{children:"Index Management"}),e.jsx(j.Item,{leftSection:e.jsx(Le,{size:14}),onClick:R=>{R.stopPropagation(),M(`/cluster/${h}/indices/${encodeURIComponent(i.name)}/edit?tab=settings`)},children:"Settings"}),e.jsx(j.Item,{leftSection:e.jsx(Ue,{size:14}),onClick:R=>{R.stopPropagation(),M(`/cluster/${h}/indices/${encodeURIComponent(i.name)}/edit?tab=mappings`)},children:"Mappings"})]})]})]})})]},i.name)})})]})})]})}function Ze({nodes:l,indices:n,shards:T,loading:h,error:M}){const{id:z}=xe(),$=ye(),I=fe(),[r,A]=ie(),k=r.get("overviewSearch")||"",u=r.get("showClosed")==="true",E=r.get("showSpecial")==="true",w=r.get("overviewExpanded")==="true",c=r.get("overviewAffected")==="true",o=pe(k,300),p=(s,g)=>{const m=new URLSearchParams(r);g===""||g===!1?m.delete(s):m.set(s,String(g)),A(m)},{data:f}=J({queryKey:["cluster",z,"settings"],queryFn:async()=>await N.proxyRequest(z,"GET","/_cluster/settings"),enabled:!!z}),v=(()=>{var oe,ce;if(!f)return!0;const s=f.transient,g=f.persistent,m=s==null?void 0:s.cluster,i=g==null?void 0:g.cluster,d=m==null?void 0:m.routing,S=i==null?void 0:i.routing,F=(oe=d==null?void 0:d.allocation)==null?void 0:oe.enable,R=(ce=S==null?void 0:S.allocation)==null?void 0:ce.enable;return(F||R||"all")==="all"})(),U=B({mutationFn:()=>N.proxyRequest(z,"PUT","/_cluster/settings",{transient:{"cluster.routing.allocation.enable":"all"}}),onSuccess:()=>{I.invalidateQueries({queryKey:["cluster",z,"settings"]}),b.show({title:"Success",message:"Shard allocation enabled",color:"green"})},onError:s=>{b.show({title:"Error",message:`Failed to enable shard allocation: ${s.message}`,color:"red"})}}),D=B({mutationFn:s=>N.proxyRequest(z,"PUT","/_cluster/settings",{transient:{"cluster.routing.allocation.enable":s}}),onSuccess:()=>{I.invalidateQueries({queryKey:["cluster",z,"settings"]}),b.show({title:"Success",message:"Shard allocation disabled",color:"green"})},onError:s=>{b.show({title:"Error",message:`Failed to disable shard allocation: ${s.message}`,color:"red"})}});if(h)return e.jsx(x,{justify:"center",py:"xl",children:e.jsx(ae,{})});if(M)return e.jsxs(ee,{icon:e.jsx(se,{size:16}),title:"Error",color:"red",children:["Failed to load shard allocation data: ",M.message]});if(!l||!n||!T||l.length===0||n.length===0)return e.jsx(C,{gap:"md",align:"center",py:"xl",children:e.jsx(t,{c:"dimmed",children:"No shard allocation data available"})});const P=T.filter(s=>s.state==="UNASSIGNED"),re=P.reduce((s,g)=>(s[g.index]||(s[g.index]=[]),s[g.index].push(g),s),{}),X=s=>T.filter(m=>m.index===s).some(m=>m.state==="UNASSIGNED"||m.state==="RELOCATING"||m.state==="INITIALIZING");let y=n.filter(s=>{const g=s.name.toLowerCase().includes(o.toLowerCase()),m=u||s.status==="open",i=E||!s.name.startsWith("."),d=!c||X(s.name);return g&&m&&i&&d});const Z=new Map;l.forEach(s=>{Z.set(s.id,s.name),Z.set(s.name,s.name),s.ip&&Z.set(s.ip,s.name)});const O=new Map;return T.forEach(s=>{if(!s.node)return;const g=Z.get(s.node);if(!g)return;O.has(g)||O.set(g,new Map);const m=O.get(g);m.has(s.index)||m.set(s.index,[]),m.get(s.index).push(s)}),e.jsxs(C,{gap:"md",children:[e.jsxs(x,{justify:"space-between",wrap:"wrap",children:[e.jsxs(x,{children:[v?e.jsxs(j,{shadow:"md",width:200,children:[e.jsx(j.Target,{children:e.jsx(V,{label:"Disable shard allocation",children:e.jsx(Q,{size:"lg",variant:"subtle",color:"green",loading:D.isPending,children:e.jsx(ke,{size:20})})})}),e.jsxs(j.Dropdown,{children:[e.jsx(j.Label,{children:"Disable Allocation"}),e.jsx(j.Item,{onClick:()=>D.mutate("none"),children:e.jsxs(x,{gap:"xs",children:[e.jsx(_,{size:14}),e.jsx(t,{size:"sm",children:"None (default)"})]})}),e.jsx(j.Item,{onClick:()=>D.mutate("primaries"),children:e.jsxs(x,{gap:"xs",children:[e.jsx(_,{size:14}),e.jsx(t,{size:"sm",children:"Primaries only"})]})}),e.jsx(j.Item,{onClick:()=>D.mutate("new_primaries"),children:e.jsxs(x,{gap:"xs",children:[e.jsx(_,{size:14}),e.jsx(t,{size:"sm",children:"New primaries only"})]})})]})]}):e.jsx(V,{label:"Enable shard allocation",children:e.jsx(Q,{size:"lg",variant:"subtle",color:"red",onClick:()=>U.mutate(),loading:U.isPending,children:e.jsx(_,{size:20})})}),e.jsx(V,{label:w?"Compress view":"Expand view",children:e.jsx(Q,{size:"lg",variant:"subtle",onClick:()=>p("overviewExpanded",!w),children:w?e.jsx($e,{size:20}):e.jsx(Me,{size:20})})})]}),e.jsxs(x,{style:{flex:1},children:[e.jsx(te,{placeholder:"Filter indices by name or alias...",leftSection:e.jsx(ge,{size:16}),value:k,onChange:s=>p("overviewSearch",s.currentTarget.value),style:{flex:1,maxWidth:400}}),e.jsxs(x,{gap:"md",children:[e.jsxs(x,{gap:"xs",children:[e.jsx("input",{type:"checkbox",id:"overview-show-closed",checked:u,onChange:s=>p("showClosed",s.target.checked)}),e.jsxs(t,{size:"sm",component:"label",htmlFor:"overview-show-closed",style:{cursor:"pointer"},children:["closed (",n.filter(s=>s.status!=="open").length,")"]})]}),e.jsxs(x,{gap:"xs",children:[e.jsx("input",{type:"checkbox",id:"overview-show-special",checked:E,onChange:s=>p("showSpecial",s.target.checked)}),e.jsxs(t,{size:"sm",component:"label",htmlFor:"overview-show-special",style:{cursor:"pointer"},children:["special (",n.filter(s=>s.name.startsWith(".")).length,")"]})]}),P.length>0&&e.jsx(he,{label:"Show only affected",checked:c,onChange:s=>p("overviewAffected",s.currentTarget.checked)}),e.jsxs(t,{size:"sm",c:"dimmed",children:[y.length," of ",n.length]})]})]})]}),e.jsxs(x,{gap:"md",children:[e.jsxs(t,{size:"sm",children:[e.jsx(t,{component:"span",fw:700,children:l.length})," nodes"]}),e.jsxs(t,{size:"sm",children:[e.jsx(t,{component:"span",fw:700,children:y.length})," indices"]}),e.jsxs(t,{size:"sm",children:[e.jsx(t,{component:"span",fw:700,children:T.length})," shards"]}),P.length>0&&e.jsxs(L,{color:"red",variant:"filled",children:[P.length," unassigned"]})]}),e.jsx(je,{children:e.jsx("div",{style:{minWidth:"800px"},children:e.jsxs(a,{striped:!0,withTableBorder:!0,withColumnBorders:!0,children:[e.jsx(a.Thead,{children:e.jsxs(a.Tr,{children:[e.jsx(a.Th,{style:{width:"120px",minWidth:"120px",maxWidth:"120px",position:"sticky",left:0,backgroundColor:"var(--mantine-color-body)",zIndex:1},children:"Node"}),y.map(s=>e.jsx(a.Th,{style:{minWidth:"120px",textAlign:"center"},children:e.jsxs(C,{gap:4,children:[e.jsx(t,{size:"xs",fw:500,truncate:"end",title:s.name,style:{cursor:"pointer",textDecoration:"underline"},onClick:g=>{g.stopPropagation(),$(`/cluster/${z}/indices/${encodeURIComponent(s.name)}/edit`)},children:s.name}),e.jsxs(x,{gap:4,justify:"center",children:[e.jsxs(L,{size:"xs",color:ve(s.health),variant:"dot",children:[s.primaryShards,"Ã—",s.replicaShards+1]}),e.jsx(t,{size:"xs",c:"dimmed",children:q(s.storeSize)})]})]})},s.name))]})}),e.jsxs(a.Tbody,{children:[P.length>0&&e.jsxs(a.Tr,{style:{backgroundColor:"var(--mantine-color-red-0)"},children:[e.jsx(a.Td,{style:{width:"120px",minWidth:"120px",maxWidth:"120px",position:"sticky",left:0,backgroundColor:"var(--mantine-color-red-0)",zIndex:1},children:e.jsxs(C,{gap:2,children:[e.jsx(t,{size:"xs",fw:700,c:"red",children:"Unassigned"}),e.jsx(L,{size:"xs",color:"red",variant:"filled",children:P.length})]})}),y.map(s=>{const g=re[s.name]||[];return e.jsx(a.Td,{style:{padding:"4px",textAlign:"center",backgroundColor:ze(s.health)},children:g.length>0?e.jsx(x,{gap:2,justify:"center",wrap:"wrap",children:g.map((m,i)=>e.jsx(V,{label:e.jsxs("div",{children:[e.jsxs("div",{children:["Shard: ",m.shard]}),e.jsxs("div",{children:["Type: ",m.primary?"Primary":"Replica"]}),e.jsx("div",{children:"State: UNASSIGNED"})]}),children:e.jsx("div",{style:{width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"var(--mantine-color-red-6)",color:"white",fontSize:"10px",fontWeight:600,borderRadius:"2px",border:m.primary?"2px solid var(--mantine-color-red-9)":"2px dashed var(--mantine-color-red-9)"},children:m.shard})},`unassigned-${m.index}-${m.shard}-${i}`))}):e.jsx(t,{size:"xs",c:"dimmed",children:"-"})},`unassigned-${s.name}`)})]}),l.map(s=>{const g=O.get(s.name);return e.jsxs(a.Tr,{children:[e.jsx(a.Td,{style:{width:"120px",minWidth:"120px",maxWidth:"120px",position:"sticky",left:0,backgroundColor:"var(--mantine-color-body)",zIndex:1},children:e.jsxs(C,{gap:4,children:[e.jsx(x,{gap:4,children:e.jsx(t,{size:"xs",fw:500,truncate:"end",title:s.name,children:s.name})}),e.jsx(t,{size:"xs",c:"dimmed",truncate:"end",title:s.ip,children:s.ip}),w&&e.jsxs(e.Fragment,{children:[e.jsx(x,{gap:4,wrap:"wrap",children:s.roles.map(m=>e.jsx(L,{size:"xs",variant:"light",color:"gray",children:m},m))}),e.jsxs(x,{gap:4,wrap:"wrap",children:[e.jsx(L,{size:"xs",color:"teal",variant:"filled",children:s.id.substring(0,8)}),e.jsx(L,{size:"xs",color:"teal",variant:"filled",children:s.roles.length}),e.jsx(L,{size:"xs",color:"teal",variant:"filled",children:q(s.heapMax)}),e.jsx(L,{size:"xs",color:"teal",variant:"filled",children:q(s.diskTotal)}),s.cpuPercent!==void 0&&e.jsxs(L,{size:"xs",color:"teal",variant:"filled",children:[s.cpuPercent,"%"]})]})]})]})}),y.map(m=>{const i=(g==null?void 0:g.get(m.name))||[];return e.jsx(a.Td,{style:{padding:"4px",textAlign:"center",backgroundColor:ze(m.health)},children:i.length>0?e.jsx(x,{gap:2,justify:"center",wrap:"wrap",children:i.map((d,S)=>e.jsx("div",{style:{width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:d.state==="STARTED"?d.primary?"var(--mantine-color-green-6)":"var(--mantine-color-green-7)":d.state==="RELOCATING"?"var(--mantine-color-yellow-6)":"var(--mantine-color-red-6)",color:"white",fontSize:"10px",fontWeight:600,borderRadius:"2px",border:d.primary?"2px solid var(--mantine-color-green-9)":"2px dashed var(--mantine-color-green-9)"},title:`Shard ${d.shard} (${d.primary?"Primary":"Replica"}) - ${d.state}`,children:d.shard},`${d.shard}-${d.primary}-${S}`))}):e.jsx(t,{size:"xs",c:"dimmed",children:"-"})},`${s.id}-${m.name}`)})]},s.id)})]})]})})})]})}function Je({shards:l,loading:n,error:T}){var w;const[h,M]=ie(),z=h.get("shardsSearch")||"",$=((w=h.get("shardStates"))==null?void 0:w.split(",").filter(Boolean))||[],I=h.get("primaryOnly")==="true",r=h.get("replicaOnly")==="true",A=pe(z,300),k=(c,o,p,f)=>{const v=new URLSearchParams(h);c!==void 0&&(c?v.set("shardsSearch",c):v.delete("shardsSearch")),o!==void 0&&(o.length>0?v.set("shardStates",o.join(",")):v.delete("shardStates")),p!==void 0&&(p?(v.set("primaryOnly","true"),v.delete("replicaOnly")):v.delete("primaryOnly")),f!==void 0&&(f?(v.set("replicaOnly","true"),v.delete("primaryOnly")):v.delete("replicaOnly")),M(v)},u=l==null?void 0:l.filter(c=>{var v;const o=c.index.toLowerCase().includes(A.toLowerCase())||((v=c.node)==null?void 0:v.toLowerCase().includes(A.toLowerCase())),p=$.length===0||$.includes(c.state),f=!I&&!r||I&&c.primary||r&&!c.primary;return o&&p&&f});if(n)return e.jsx(x,{justify:"center",py:"xl",children:e.jsx(ae,{})});if(T)return e.jsxs(ee,{icon:e.jsx(se,{size:16}),title:"Error",color:"red",children:["Failed to load shards: ",T.message]});if(!l||l.length===0)return e.jsx(t,{c:"dimmed",children:"No shards found"});const E=(u||[]).reduce((c,o)=>(c[o.state]||(c[o.state]=[]),c[o.state].push(o),c),{});return e.jsxs(C,{gap:"md",children:[e.jsxs(x,{wrap:"wrap",children:[e.jsx(te,{placeholder:"Search by index or node...",leftSection:e.jsx(ge,{size:16}),value:z,onChange:c=>k(c.currentTarget.value,void 0,void 0,void 0),style:{flex:1,maxWidth:300}}),e.jsx(me,{placeholder:"State",data:["STARTED","INITIALIZING","RELOCATING","UNASSIGNED"],value:$,onChange:c=>k(void 0,c,void 0,void 0),clearable:!0,style:{maxWidth:250}}),e.jsxs(x,{gap:"md",children:[e.jsx(he,{label:"Primary only",checked:I,onChange:c=>k(void 0,void 0,c.currentTarget.checked,void 0)}),e.jsx(he,{label:"Replica only",checked:r,onChange:c=>k(void 0,void 0,void 0,c.currentTarget.checked)})]})]}),e.jsx(W,{children:Object.entries(E).map(([c,o])=>e.jsx(W.Col,{span:{base:12,sm:6,md:3},children:e.jsx(H,{shadow:"sm",padding:"md",children:e.jsxs(C,{gap:"xs",children:[e.jsx(t,{size:"sm",c:"dimmed",children:c}),e.jsx(t,{size:"xl",fw:700,children:o.length})]})})},c))}),u&&u.length===0?e.jsx(t,{c:"dimmed",ta:"center",py:"xl",children:"No shards match your filters"}):e.jsxs(je,{children:[e.jsxs(a,{striped:!0,highlightOnHover:!0,children:[e.jsx(a.Thead,{children:e.jsxs(a.Tr,{children:[e.jsx(a.Th,{children:"Index"}),e.jsx(a.Th,{children:"Shard"}),e.jsx(a.Th,{children:"Type"}),e.jsx(a.Th,{children:"State"}),e.jsx(a.Th,{children:"Node"}),e.jsx(a.Th,{children:"Documents"}),e.jsx(a.Th,{children:"Size"})]})}),e.jsx(a.Tbody,{children:u==null?void 0:u.slice(0,100).map((c,o)=>{var f;const p=c.state==="UNASSIGNED";return e.jsxs(a.Tr,{style:{backgroundColor:p?"rgba(250, 82, 82, 0.1)":void 0},children:[e.jsx(a.Td,{children:e.jsx(t,{size:"sm",children:c.index})}),e.jsx(a.Td,{children:e.jsx(t,{size:"sm",children:c.shard})}),e.jsx(a.Td,{children:e.jsx(L,{size:"sm",variant:"light",color:c.primary?"blue":"gray",children:c.primary?"Primary":"Replica"})}),e.jsx(a.Td,{children:e.jsx(L,{size:"sm",color:c.state==="STARTED"?"green":c.state==="UNASSIGNED"?"red":"yellow",children:c.state})}),e.jsx(a.Td,{children:e.jsx(t,{size:"sm",children:c.node||"N/A"})}),e.jsx(a.Td,{children:e.jsx(t,{size:"sm",children:((f=c.docs)==null?void 0:f.toLocaleString())||"N/A"})}),e.jsx(a.Td,{children:e.jsx(t,{size:"sm",children:c.store?q(c.store):"N/A"})})]},`${c.index}-${c.shard}-${o}`)})})]}),u&&u.length>100&&e.jsxs(t,{size:"sm",c:"dimmed",ta:"center",mt:"md",children:["Showing first 100 of ",u.length," shards"]})]})]})}export{ys as ClusterView};
