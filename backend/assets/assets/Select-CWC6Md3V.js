import{r as c,B as Ce,x as we,D as ye,E as z,H as De,j as a}from"./index-BExQHbQo.js";import{g as Oe,a as Ie,u as Pe,C as d,O as je}from"./OptionsDropdown-CGaL_x8F.js";import{I as L}from"./InputBase-B6iHbOyR.js";function Ee(p){const h=c.useRef(void 0);return c.useEffect(()=>{h.current=p},[p]),h.current}const Ve={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},U=Ce((p,h)=>{const k=we("Select",Ve,p),{classNames:W,styles:$,unstyled:f,vars:ke,dropdownOpened:q,defaultDropdownOpened:G,onDropdownClose:_,onDropdownOpen:v,onFocus:C,onBlur:w,onClick:y,onChange:J,data:D,value:b,defaultValue:K,selectFirstOptionOnChange:O,onOptionSubmit:I,comboboxProps:Q,readOnly:g,disabled:m,filter:X,limit:Y,withScrollArea:Z,maxDropdownHeight:ee,size:P,searchable:n,rightSection:te,checkIconPosition:oe,withCheckIcon:le,nothingFoundMessage:B,name:se,form:ae,searchValue:ne,defaultSearchValue:re,onSearchChange:ce,allowDeselect:ie,error:F,rightSectionPointerEvents:ue,id:de,clearable:pe,clearButtonProps:he,hiddenInputProps:fe,renderOption:be,onClear:j,autoComplete:ge,scrollAreaProps:me,__defaultRightSection:Be,__clearSection:Fe,__clearable:Ne,chevronColor:Se,...S}=k,E=c.useMemo(()=>Oe(D),[D]),i=c.useMemo(()=>Ie(E),[E]),N=ye(de),[t,R,A]=z({value:b,defaultValue:K,finalValue:null,onChange:J}),l=typeof t=="string"?i[t]:void 0,u=Ee(l),[x,xe,_e]=z({value:ne,defaultValue:re,finalValue:l?l.label:"",onChange:ce}),o=Pe({opened:q,defaultOpened:G,onDropdownOpen:()=>{v==null||v(),o.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{_==null||_(),o.resetSelectedOption()}}),r=e=>{xe(e),o.resetSelectedOption()},{resolvedClassNames:H,resolvedStyles:M}=De({props:k,styles:$,classNames:W});c.useEffect(()=>{O&&o.selectFirstOption()},[O,x]),c.useEffect(()=>{b===null&&r(""),typeof b=="string"&&l&&((u==null?void 0:u.value)!==l.value||(u==null?void 0:u.label)!==l.label)&&r(l.label)},[b,l]),c.useEffect(()=>{var e;!A&&!_e&&r(typeof t=="string"&&((e=i[t])==null?void 0:e.label)||"")},[D,t]);const ve=a.jsx(d.ClearButton,{...he,onClear:()=>{R(null,null),r(""),j==null||j()}}),T=pe&&!!t&&!m&&!g;return a.jsxs(a.Fragment,{children:[a.jsxs(d,{store:o,__staticSelector:"Select",classNames:H,styles:M,unstyled:f,readOnly:g,onOptionSubmit:e=>{I==null||I(e);const s=ie&&i[e].value===t?null:i[e],V=s?s.value:null;V!==t&&R(V,s),!A&&r(typeof V=="string"&&(s==null?void 0:s.label)||""),o.closeDropdown()},size:P,...Q,children:[a.jsx(d.Target,{targetType:n?"input":"button",autoComplete:ge,children:a.jsx(L,{id:N,ref:h,__defaultRightSection:a.jsx(d.Chevron,{size:P,error:F,unstyled:f,color:Se}),__clearSection:ve,__clearable:T,rightSection:te,rightSectionPointerEvents:ue||(T?"all":"none"),...S,size:P,__staticSelector:"Select",disabled:m,readOnly:g||!n,value:x,onChange:e=>{r(e.currentTarget.value),o.openDropdown(),O&&o.selectFirstOption()},onFocus:e=>{n&&o.openDropdown(),C==null||C(e)},onBlur:e=>{var s;n&&o.closeDropdown(),r(t!=null&&((s=i[t])==null?void 0:s.label)||""),w==null||w(e)},onClick:e=>{n?o.openDropdown():o.toggleDropdown(),y==null||y(e)},classNames:H,styles:M,unstyled:f,pointer:!n,error:F})}),a.jsx(je,{data:E,hidden:g||m,filter:X,search:x,limit:Y,hiddenWhenEmpty:!B,withScrollArea:Z,maxDropdownHeight:ee,filterOptions:n&&(l==null?void 0:l.label)!==x,value:t,checkIconPosition:oe,withCheckIcon:le,nothingFoundMessage:B,unstyled:f,labelId:S.label?`${N}-label`:void 0,"aria-label":S.label?void 0:S["aria-label"],renderOption:be,scrollAreaProps:me})]}),a.jsx(d.HiddenInput,{value:t,name:se,form:ae,disabled:m,...fe})]})});U.classes={...L.classes,...d.classes};U.displayName="@mantine/core/Select";export{U as S};
