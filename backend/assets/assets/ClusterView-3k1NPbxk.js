import{c as ue,r as de,h as fe,i as Ce,n as y,f as F,j as e,M as j,k as Q,l as K,m as Ee,o as Pe,p as Te,S,d as l,G as u,q as xe,a as Fe,s as ie,b as J,A as ee,I as se,L as ae,T as Ne,u as ye,t as ge,v as je,e as t,w as we,x as Ae,y as Le}from"./index-BoVBWD-O.js";import{u as q}from"./useMutation-mOBMNUtV.js";import{u as De}from"./accessibility-CpaNjtbb.js";import{I as Ue}from"./IconDeviceFloppy-C8uPlV9T.js";import{I as Oe}from"./IconTrash-C5fJoNO-.js";import{T as te}from"./TextInput-4SFxz4kU.js";import{B as Y}from"./Button-WlzdrWQu.js";import{N as Re}from"./NumberInput-DQP11T3A.js";import{P as ne}from"./Progress-BQDwPsRg.js";import{G}from"./Grid-Yd4pYR80.js";import{C as V}from"./Card-BRp017Ae.js";import{T as B}from"./Tabs-B3_Z0XmN.js";import{I as Ie,a as H,b as ke,c as $e,C as he}from"./IconMinimize-ZVo8-cZn.js";import{B as L}from"./Badge-dUYDxRyA.js";import{M as me}from"./MultiSelect-BpAc0NUH.js";import{I as qe,a as Be}from"./IconSortDescending-CZ3pIgw_.js";import"./get-auto-contrast-value-Da6zqqWm.js";import"./get-safe-id-Bp3H8K0-.js";import"./InputsGroupFieldset-DffCPJMp.js";var Me=ue("dots","IconDots",[["path",{d:"M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]),Ge=ue("eraser","IconEraser",[["path",{d:"M19 20h-10.5l-4.21 -4.3a1 1 0 0 1 0 -1.41l10 -10a1 1 0 0 1 1.41 0l5 5a1 1 0 0 1 0 1.41l-9.2 9.3",key:"svg-0"}],["path",{d:"M18 13.3l-6.3 -6.3",key:"svg-1"}]]),We=ue("folder-off","IconFolderOff",[["path",{d:"M8 4h1l3 3h7a2 2 0 0 1 2 2v8m-2 2h-14a2 2 0 0 1 -2 -2v-11a2 2 0 0 1 1.189 -1.829",key:"svg-0"}],["path",{d:"M3 3l18 18",key:"svg-1"}]]),Ke=ue("folder-open","IconFolderOpen",[["path",{d:"M5 19l2.757 -7.351a1 1 0 0 1 .936 -.649h12.307a1 1 0 0 1 .986 1.164l-.996 5.211a2 2 0 0 1 -1.964 1.625h-14.026a2 2 0 0 1 -2 -2v-11a2 2 0 0 1 2 -2h4l3 3h7a2 2 0 0 1 2 2v2",key:"svg-0"}]]);function pe(o,i=300){const[C,d]=de.useState(o);return de.useEffect(()=>{const P=setTimeout(()=>{d(o)},i);return()=>{clearTimeout(P)}},[o,i]),C}function Qe({clusterId:o,index:i}){const C=fe(),{announceSuccess:d,announceError:P}=De(),[k,{open:z,close:n}]=Ce(!1),[$,{open:N,close:T}]=Ce(!1),[p,I]=de.useState(""),[w,s]=de.useState(1),h=q({mutationFn:()=>F.openIndex(o,i.name),onMutate:()=>{y.show({id:`open-${i.name}`,title:"Opening index",message:`Opening index ${i.name}...`,loading:!0,autoClose:!1})},onSuccess:()=>{y.update({id:`open-${i.name}`,title:"Success",message:`Index ${i.name} opened successfully`,color:"green",loading:!1,autoClose:3e3}),d(`Index ${i.name} opened successfully`),C.invalidateQueries({queryKey:["cluster",o,"indices"]})},onError:f=>{y.update({id:`open-${i.name}`,title:"Error",message:`Failed to open index: ${f.message}`,color:"red",loading:!1,autoClose:5e3}),P(`Failed to open index: ${f.message}`)}}),x=q({mutationFn:()=>F.closeIndex(o,i.name),onMutate:()=>{y.show({id:`close-${i.name}`,title:"Closing index",message:`Closing index ${i.name}...`,loading:!0,autoClose:!1})},onSuccess:()=>{y.update({id:`close-${i.name}`,title:"Success",message:`Index ${i.name} closed successfully`,color:"green",loading:!1,autoClose:3e3}),C.invalidateQueries({queryKey:["cluster",o,"indices"]})},onError:f=>{y.update({id:`close-${i.name}`,title:"Error",message:`Failed to close index: ${f.message}`,color:"red",loading:!1,autoClose:5e3})}}),E=q({mutationFn:()=>F.deleteIndex(o,i.name),onMutate:()=>{y.show({id:`delete-${i.name}`,title:"Deleting index",message:`Deleting index ${i.name}...`,loading:!0,autoClose:!1})},onSuccess:()=>{y.update({id:`delete-${i.name}`,title:"Success",message:`Index ${i.name} deleted successfully`,color:"green",loading:!1,autoClose:3e3}),C.invalidateQueries({queryKey:["cluster",o,"indices"]}),n(),I("")},onError:f=>{y.update({id:`delete-${i.name}`,title:"Error",message:`Failed to delete index: ${f.message}`,color:"red",loading:!1,autoClose:5e3})}}),v=q({mutationFn:f=>F.forceMergeIndex(o,i.name,f),onMutate:()=>{y.show({id:`forcemerge-${i.name}`,title:"Force merging index",message:`Force merging index ${i.name}...`,loading:!0,autoClose:!1})},onSuccess:()=>{y.update({id:`forcemerge-${i.name}`,title:"Success",message:`Index ${i.name} force merged successfully`,color:"green",loading:!1,autoClose:3e3}),T(),s(1)},onError:f=>{y.update({id:`forcemerge-${i.name}`,title:"Error",message:`Failed to force merge index: ${f.message}`,color:"red",loading:!1,autoClose:5e3})}}),D=q({mutationFn:()=>F.clearCacheIndex(o,i.name),onMutate:()=>{y.show({id:`clearcache-${i.name}`,title:"Clearing cache",message:`Clearing cache for index ${i.name}...`,loading:!0,autoClose:!1})},onSuccess:()=>{y.update({id:`clearcache-${i.name}`,title:"Success",message:`Cache cleared for index ${i.name}`,color:"green",loading:!1,autoClose:3e3})},onError:f=>{y.update({id:`clearcache-${i.name}`,title:"Error",message:`Failed to clear cache: ${f.message}`,color:"red",loading:!1,autoClose:5e3})}}),A=q({mutationFn:()=>F.refreshIndex(o,i.name),onMutate:()=>{y.show({id:`refresh-${i.name}`,title:"Refreshing index",message:`Refreshing index ${i.name}...`,loading:!0,autoClose:!1})},onSuccess:()=>{y.update({id:`refresh-${i.name}`,title:"Success",message:`Index ${i.name} refreshed successfully`,color:"green",loading:!1,autoClose:3e3})},onError:f=>{y.update({id:`refresh-${i.name}`,title:"Error",message:`Failed to refresh index: ${f.message}`,color:"red",loading:!1,autoClose:5e3})}}),U=q({mutationFn:()=>F.flushIndex(o,i.name),onMutate:()=>{y.show({id:`flush-${i.name}`,title:"Flushing index",message:`Flushing index ${i.name}...`,loading:!0,autoClose:!1})},onSuccess:()=>{y.update({id:`flush-${i.name}`,title:"Success",message:`Index ${i.name} flushed successfully`,color:"green",loading:!1,autoClose:3e3})},onError:f=>{y.update({id:`flush-${i.name}`,title:"Error",message:`Failed to flush index: ${f.message}`,color:"red",loading:!1,autoClose:5e3})}}),re=()=>{p===i.name&&E.mutate()},X=()=>{const f=typeof w=="number"?w:parseInt(w,10);!isNaN(f)&&f>0&&v.mutate(f)};return e.jsxs(e.Fragment,{children:[e.jsxs(j,{shadow:"md",width:200,children:[e.jsx(j.Target,{children:e.jsx(Q,{label:"Index operations",children:e.jsx(K,{variant:"subtle",color:"gray","aria-label":`Operations for index ${i.name}`,children:e.jsx(Me,{size:16,"aria-hidden":"true"})})})}),e.jsxs(j.Dropdown,{children:[e.jsx(j.Label,{children:"Index Operations"}),i.status==="close"?e.jsx(j.Item,{leftSection:e.jsx(Ke,{size:14,"aria-hidden":"true"}),onClick:()=>h.mutate(),disabled:h.isPending,children:"Open Index"}):e.jsx(j.Item,{leftSection:e.jsx(We,{size:14,"aria-hidden":"true"}),onClick:()=>x.mutate(),disabled:x.isPending,children:"Close Index"}),e.jsx(j.Item,{leftSection:e.jsx(Ee,{size:14,"aria-hidden":"true"}),onClick:()=>A.mutate(),disabled:A.isPending,children:"Refresh"}),e.jsx(j.Item,{leftSection:e.jsx(Ue,{size:14,"aria-hidden":"true"}),onClick:()=>U.mutate(),disabled:U.isPending,children:"Flush"}),e.jsx(j.Item,{leftSection:e.jsx(Ge,{size:14,"aria-hidden":"true"}),onClick:()=>D.mutate(),disabled:D.isPending,children:"Clear Cache"}),e.jsx(j.Item,{leftSection:e.jsx(Pe,{size:14,"aria-hidden":"true"}),onClick:N,children:"Force Merge"}),e.jsx(j.Divider,{}),e.jsx(j.Item,{leftSection:e.jsx(Oe,{size:14,"aria-hidden":"true"}),color:"red",onClick:z,children:"Delete Index"})]})]}),e.jsx(Te,{opened:k,onClose:()=>{n(),I("")},title:"Delete Index",centered:!0,"aria-labelledby":"delete-modal-title","aria-describedby":"delete-modal-description",children:e.jsxs(S,{gap:"md",children:[e.jsxs(l,{size:"sm",id:"delete-modal-description",children:["Are you sure you want to delete index ",e.jsx(l,{span:!0,fw:700,children:i.name}),"? This action cannot be undone."]}),e.jsx(l,{size:"sm",c:"dimmed",children:"Type the index name to confirm:"}),e.jsx(te,{placeholder:i.name,value:p,onChange:f=>I(f.currentTarget.value),"data-autofocus":!0,"aria-label":"Confirm index name","aria-required":"true"}),e.jsxs(u,{justify:"flex-end",children:[e.jsx(Y,{variant:"default",onClick:()=>{n(),I("")},children:"Cancel"}),e.jsx(Y,{color:"red",onClick:re,disabled:p!==i.name||E.isPending,loading:E.isPending,"aria-label":`Delete index ${i.name}`,children:"Delete"})]})]})}),e.jsx(Te,{opened:$,onClose:()=>{T(),s(1)},title:"Force Merge Index",centered:!0,"aria-labelledby":"forcemerge-modal-title","aria-describedby":"forcemerge-modal-description",children:e.jsxs(S,{gap:"md",children:[e.jsxs(l,{size:"sm",id:"forcemerge-modal-description",children:["Force merge index ",e.jsx(l,{span:!0,fw:700,children:i.name})," to reduce the number of segments."]}),e.jsx(Re,{label:"Maximum number of segments",description:"The number of segments to merge to. Set to 1 for a single segment.",placeholder:"1",value:w,onChange:s,min:1,max:100,"aria-label":"Maximum number of segments","aria-required":"true"}),e.jsxs(u,{justify:"flex-end",children:[e.jsx(Y,{variant:"default",onClick:()=>{T(),s(1)},children:"Cancel"}),e.jsx(Y,{onClick:X,disabled:v.isPending,loading:v.isPending,"aria-label":`Force merge index ${i.name}`,children:"Force Merge"})]})]})})]})}function ve(o){switch(o){case"green":return"green";case"yellow":return"yellow";case"red":return"red";default:return"gray"}}function R(o){if(o===0)return"0 B";const i=1024,C=["B","KB","MB","GB","TB"],d=Math.floor(Math.log(o)/Math.log(i));return`${(o/Math.pow(i,d)).toFixed(2)} ${C[d]}`}function W(o,i){return i===0?0:Math.round(o/i*100)}function ze(o){switch(o){case"green":return"transparent";case"yellow":return"rgba(250, 176, 5, 0.15)";case"red":return"rgba(250, 82, 82, 0.15)";default:return"transparent"}}function ps(){var D;const{id:o}=xe(),i=Fe(),[C,d]=ie(),P=C.get("tab")||"overview",k=A=>{A&&d({tab:A})},z=A=>{d({tab:A})},{data:n,isLoading:$,error:N}=J({queryKey:["cluster",o,"stats"],queryFn:()=>F.getClusterStats(o),refetchInterval:i,enabled:!!o}),{data:T,isLoading:p,error:I}=J({queryKey:["cluster",o,"nodes"],queryFn:()=>F.getNodes(o),refetchInterval:i,enabled:!!o}),{data:w,isLoading:s,error:h}=J({queryKey:["cluster",o,"indices"],queryFn:()=>F.getIndices(o),refetchInterval:i,enabled:!!o}),{data:x,isLoading:E,error:v}=J({queryKey:["cluster",o,"shards"],queryFn:()=>F.getShards(o),refetchInterval:i,enabled:!!o});return o?$?e.jsx(S,{p:"md",children:e.jsx(u,{justify:"center",mt:"xl",children:e.jsx(ae,{size:"lg"})})}):N?e.jsx(S,{p:"md",children:e.jsxs(ee,{icon:e.jsx(se,{size:16}),title:"Error",color:"red",children:["Failed to load cluster information: ",N.message]})}):e.jsxs(S,{gap:"md",p:"md",children:[e.jsx(u,{justify:"space-between",wrap:"wrap",children:e.jsxs("div",{children:[e.jsx(Ne,{order:1,className:"text-responsive-xl",children:(n==null?void 0:n.clusterName)||o}),e.jsx(l,{size:"sm",c:"dimmed",children:"Cluster Overview"})]})}),e.jsx(ne,{value:100,color:ve((n==null?void 0:n.health)||"red"),size:"sm",radius:"xs","aria-label":`Cluster health: ${(n==null?void 0:n.health)||"unknown"}`}),e.jsxs(G,{children:[e.jsx(G.Col,{span:{base:12,sm:6,md:3},children:e.jsx(V,{shadow:"sm",padding:"lg",style:{cursor:"pointer"},onClick:()=>z("nodes"),children:e.jsxs(S,{gap:"xs",children:[e.jsx(l,{size:"sm",c:"dimmed",children:"Nodes"}),e.jsx(l,{size:"xl",fw:700,children:(n==null?void 0:n.numberOfNodes)||0}),e.jsxs(l,{size:"xs",c:"dimmed",children:[(n==null?void 0:n.numberOfDataNodes)||0," data nodes"]})]})})}),e.jsx(G.Col,{span:{base:12,sm:6,md:3},children:e.jsx(V,{shadow:"sm",padding:"lg",style:{cursor:"pointer"},onClick:()=>z("indices"),children:e.jsxs(S,{gap:"xs",children:[e.jsx(l,{size:"sm",c:"dimmed",children:"Indices"}),e.jsx(l,{size:"xl",fw:700,children:(n==null?void 0:n.numberOfIndices)||0}),e.jsxs(l,{size:"xs",c:"dimmed",children:[((D=n==null?void 0:n.numberOfDocuments)==null?void 0:D.toLocaleString())||0," documents"]})]})})}),e.jsx(G.Col,{span:{base:12,sm:6,md:3},children:e.jsx(V,{shadow:"sm",padding:"lg",style:{cursor:"pointer"},onClick:()=>z("shards"),children:e.jsxs(S,{gap:"xs",children:[e.jsx(l,{size:"sm",c:"dimmed",children:"Shards"}),e.jsx(l,{size:"xl",fw:700,children:(n==null?void 0:n.activeShards)||0}),e.jsxs(l,{size:"xs",c:"dimmed",children:[(n==null?void 0:n.activePrimaryShards)||0," primary"]})]})})}),e.jsx(G.Col,{span:{base:12,sm:6,md:3},children:e.jsx(V,{shadow:"sm",padding:"lg",style:{cursor:"pointer"},onClick:()=>z("shards"),children:e.jsxs(S,{gap:"xs",children:[e.jsx(l,{size:"sm",c:"dimmed",children:"Unassigned"}),e.jsx(l,{size:"xl",fw:700,c:n!=null&&n.unassignedShards?"red":void 0,children:(n==null?void 0:n.unassignedShards)||0}),e.jsxs(l,{size:"xs",c:"dimmed",children:[(n==null?void 0:n.relocatingShards)||0," relocating"]})]})})})]}),((n==null?void 0:n.memoryTotal)||(n==null?void 0:n.diskTotal))&&e.jsxs(G,{children:[(n==null?void 0:n.memoryTotal)&&e.jsx(G.Col,{span:{base:12,md:6},children:e.jsx(V,{shadow:"sm",padding:"lg",children:e.jsxs(S,{gap:"xs",children:[e.jsx(l,{size:"sm",c:"dimmed",children:"Memory Usage"}),e.jsx(ne,{value:W(n.memoryUsed||0,n.memoryTotal),color:W(n.memoryUsed||0,n.memoryTotal)>90?"red":"blue",size:"sm",radius:"xs"}),e.jsxs(l,{size:"xs",c:"dimmed",children:[R(n.memoryUsed||0)," / ",R(n.memoryTotal)," (",W(n.memoryUsed||0,n.memoryTotal),"%)"]})]})})}),(n==null?void 0:n.diskTotal)&&e.jsx(G.Col,{span:{base:12,md:6},children:e.jsx(V,{shadow:"sm",padding:"lg",children:e.jsxs(S,{gap:"xs",children:[e.jsx(l,{size:"sm",c:"dimmed",children:"Disk Usage"}),e.jsx(ne,{value:W(n.diskUsed||0,n.diskTotal),color:W(n.diskUsed||0,n.diskTotal)>90?"red":"blue",size:"sm",radius:"xs"}),e.jsxs(l,{size:"xs",c:"dimmed",children:[R(n.diskUsed||0)," / ",R(n.diskTotal)," (",W(n.diskUsed||0,n.diskTotal),"%)"]})]})})})]}),e.jsx(V,{shadow:"sm",padding:"lg",children:e.jsxs(B,{value:P,onChange:k,children:[e.jsxs(B.List,{children:[e.jsx(B.Tab,{value:"overview",children:"Overview"}),e.jsxs(B.Tab,{value:"nodes",children:["Nodes (",(T==null?void 0:T.length)||0,")"]}),e.jsxs(B.Tab,{value:"indices",children:["Indices (",(w==null?void 0:w.length)||0,")"]}),e.jsxs(B.Tab,{value:"shards",children:["Shards (",(x==null?void 0:x.length)||0,")"]})]}),e.jsx(B.Panel,{value:"overview",pt:"md",children:e.jsx(_e,{nodes:T,indices:w,shards:x,loading:p||s||E,error:I||h||v})}),e.jsx(B.Panel,{value:"nodes",pt:"md",children:e.jsx(Ve,{nodes:T,loading:p,error:I})}),e.jsx(B.Panel,{value:"indices",pt:"md",children:e.jsx(He,{indices:w,loading:s,error:h})}),e.jsx(B.Panel,{value:"shards",pt:"md",children:e.jsx(Ze,{shards:x,loading:E,error:v})})]})})]}):e.jsx(S,{p:"md",children:e.jsx(ee,{icon:e.jsx(se,{size:16}),title:"Error",color:"red",children:"Cluster ID is required"})})}function Ve({nodes:o,loading:i,error:C}){var w;const{id:d}=xe(),P=ye(),[k,z]=ie(),n=k.get("nodesSearch")||"",$=((w=k.get("roles"))==null?void 0:w.split(",").filter(Boolean))||[],N=pe(n,300),T=(s,h)=>{const x=new URLSearchParams(k);s!==void 0&&(s?x.set("nodesSearch",s):x.delete("nodesSearch")),h!==void 0&&(h.length>0?x.set("roles",h.join(",")):x.delete("roles")),z(x)},p=Array.from(new Set((o==null?void 0:o.flatMap(s=>s.roles))||[])),I=o==null?void 0:o.filter(s=>{var E;const h=s.name.toLowerCase().includes(N.toLowerCase())||((E=s.ip)==null?void 0:E.toLowerCase().includes(N.toLowerCase())),x=$.length===0||$.some(v=>s.roles.includes(v));return h&&x});return i?e.jsx(u,{justify:"center",py:"xl",children:e.jsx(ae,{})}):C?e.jsxs(ee,{icon:e.jsx(se,{size:16}),title:"Error",color:"red",children:["Failed to load nodes: ",C.message]}):!o||o.length===0?e.jsx(l,{c:"dimmed",children:"No nodes found"}):e.jsxs(S,{gap:"md",children:[e.jsxs(u,{children:[e.jsx(te,{placeholder:"Search nodes...",leftSection:e.jsx(ge,{size:16}),value:n,onChange:s=>T(s.currentTarget.value,void 0),style:{flex:1,maxWidth:400}}),e.jsx(me,{placeholder:"Filter by roles",data:p,value:$,onChange:s=>T(void 0,s),clearable:!0,searchable:!0,style:{flex:1,maxWidth:300}})]}),I&&I.length===0?e.jsx(l,{c:"dimmed",ta:"center",py:"xl",children:"No nodes match your filters"}):e.jsx(je,{children:e.jsxs(t,{striped:!0,highlightOnHover:!0,children:[e.jsx(t.Thead,{children:e.jsxs(t.Tr,{children:[e.jsx(t.Th,{children:"Name"}),e.jsx(t.Th,{children:"Roles"}),e.jsx(t.Th,{children:"Heap Usage"}),e.jsx(t.Th,{children:"Disk Usage"}),e.jsx(t.Th,{children:"CPU"})]})}),e.jsx(t.Tbody,{children:I==null?void 0:I.map(s=>e.jsxs(t.Tr,{style:{cursor:"pointer"},onClick:()=>P(`/cluster/${d}/nodes/${s.id}`),children:[e.jsxs(t.Td,{children:[e.jsx(l,{size:"sm",fw:500,children:s.name}),s.ip&&e.jsx(l,{size:"xs",c:"dimmed",children:s.ip})]}),e.jsx(t.Td,{children:e.jsx(u,{gap:"xs",children:s.roles.map(h=>e.jsx(L,{size:"sm",variant:"light",children:h},h))})}),e.jsx(t.Td,{children:e.jsxs(S,{gap:4,children:[e.jsx(ne,{value:W(s.heapUsed,s.heapMax),color:W(s.heapUsed,s.heapMax)>90?"red":"blue",size:"sm",radius:"xs"}),e.jsxs(l,{size:"xs",c:"dimmed",children:[R(s.heapUsed)," / ",R(s.heapMax)]})]})}),e.jsx(t.Td,{children:e.jsxs(S,{gap:4,children:[e.jsx(ne,{value:W(s.diskUsed,s.diskTotal),color:W(s.diskUsed,s.diskTotal)>90?"red":"blue",size:"sm",radius:"xs"}),e.jsxs(l,{size:"xs",c:"dimmed",children:[R(s.diskUsed)," / ",R(s.diskTotal)]})]})}),e.jsx(t.Td,{children:e.jsx(l,{size:"sm",children:s.cpuPercent!==void 0?`${s.cpuPercent}%`:"N/A"})})]},s.id))})]})})]})}function He({indices:o,loading:i,error:C}){var g,m;const{id:d}=xe(),P=ye(),k=fe(),[z,n]=ie(),$=z.get("indicesSearch")||"",N=((g=z.get("health"))==null?void 0:g.split(",").filter(Boolean))||[],T=((m=z.get("status"))==null?void 0:m.split(",").filter(Boolean))||[],p=z.get("expanded")==="true",I=z.get("sort")!=="desc",w=z.get("affected")==="true",s=pe($,300),{data:h}=J({queryKey:["cluster",d,"shards"],queryFn:()=>F.getShards(d),enabled:!!d}),{data:x}=J({queryKey:["cluster",d,"settings"],queryFn:async()=>await F.proxyRequest(d,"GET","/_cluster/settings"),enabled:!!d}),E=(()=>{var be,Se;if(!x)return!0;const a=x.transient,c=x.persistent,b=a==null?void 0:a.cluster,M=c==null?void 0:c.cluster,Z=b==null?void 0:b.routing,le=M==null?void 0:M.routing,oe=(be=Z==null?void 0:Z.allocation)==null?void 0:be.enable,ce=(Se=le==null?void 0:le.allocation)==null?void 0:Se.enable;return(oe||ce||"all")==="all"})(),v=q({mutationFn:()=>F.proxyRequest(d,"PUT","/_cluster/settings",{transient:{"cluster.routing.allocation.enable":"all"}}),onSuccess:()=>{k.invalidateQueries({queryKey:["cluster",d,"settings"]}),y.show({title:"Success",message:"Shard allocation enabled",color:"green"})},onError:a=>{y.show({title:"Error",message:`Failed to enable shard allocation: ${a.message}`,color:"red"})}}),D=q({mutationFn:a=>F.proxyRequest(d,"PUT","/_cluster/settings",{transient:{"cluster.routing.allocation.enable":a}}),onSuccess:()=>{k.invalidateQueries({queryKey:["cluster",d,"settings"]}),y.show({title:"Success",message:"Shard allocation disabled",color:"green"})},onError:a=>{y.show({title:"Error",message:`Failed to disable shard allocation: ${a.message}`,color:"red"})}}),A=(a,c,b)=>{const M=new URLSearchParams(z);a!==void 0&&(a?M.set("indicesSearch",a):M.delete("indicesSearch")),c!==void 0&&(c.length>0?M.set("health",c.join(",")):M.delete("health")),b!==void 0&&(b.length>0?M.set("status",b.join(",")):M.delete("status")),n(M)},U=(a,c)=>{const b=new URLSearchParams(z);c===""||c===!1?b.delete(a):b.set(a,String(c)),n(b)},re=(h==null?void 0:h.reduce((a,c)=>(a[c.index]||(a[c.index]=[]),a[c.index].push(c),a),{}))||{},X=(h==null?void 0:h.filter(a=>a.state==="UNASSIGNED"))||[],f=X.reduce((a,c)=>(a[c.index]||(a[c.index]=[]),a[c.index].push(c),a),{}),_=a=>(re[a]||[]).some(b=>b.state==="UNASSIGNED"||b.state==="RELOCATING"||b.state==="INITIALIZING");let O=o==null?void 0:o.filter(a=>{const c=a.name.toLowerCase().includes(s.toLowerCase()),b=N.length===0||N.includes(a.health),M=T.length===0||T.includes(a.status),Z=!w||_(a.name);return c&&b&&M&&Z});if(O&&(O=[...O].sort((a,c)=>I?a.name.localeCompare(c.name):c.name.localeCompare(a.name))),i)return e.jsx(u,{justify:"center",py:"xl",children:e.jsx(ae,{})});if(C)return e.jsxs(ee,{icon:e.jsx(se,{size:16}),title:"Error",color:"red",children:["Failed to load indices: ",C.message]});if(!o||o.length===0)return e.jsxs(S,{gap:"md",align:"center",py:"xl",children:[e.jsx(l,{c:"dimmed",children:"No indices found"}),d&&e.jsx(Y,{leftSection:e.jsx(we,{size:16}),onClick:()=>P(`/cluster/${d}/indices/create`),children:"Create Index"})]});const r=X.length>0;return e.jsxs(S,{gap:"md",children:[e.jsxs(u,{justify:"space-between",wrap:"wrap",children:[e.jsxs(u,{children:[E?e.jsxs(j,{shadow:"md",width:200,children:[e.jsx(j.Target,{children:e.jsx(Q,{label:"Disable shard allocation",children:e.jsx(K,{size:"lg",variant:"subtle",color:"green",loading:D.isPending,children:e.jsx(Ie,{size:20})})})}),e.jsxs(j.Dropdown,{children:[e.jsx(j.Label,{children:"Disable Allocation"}),e.jsx(j.Item,{onClick:()=>D.mutate("none"),children:e.jsxs(u,{gap:"xs",children:[e.jsx(H,{size:14}),e.jsx(l,{size:"sm",children:"None (default)"})]})}),e.jsx(j.Item,{onClick:()=>D.mutate("primaries"),children:e.jsxs(u,{gap:"xs",children:[e.jsx(H,{size:14}),e.jsx(l,{size:"sm",children:"Primaries only"})]})}),e.jsx(j.Item,{onClick:()=>D.mutate("new_primaries"),children:e.jsxs(u,{gap:"xs",children:[e.jsx(H,{size:14}),e.jsx(l,{size:"sm",children:"New primaries only"})]})})]})]}):e.jsx(Q,{label:"Enable shard allocation",children:e.jsx(K,{size:"lg",variant:"subtle",color:"red",onClick:()=>v.mutate(),loading:v.isPending,children:e.jsx(H,{size:20})})}),e.jsx(Q,{label:p?"Compress view":"Expand view",children:e.jsx(K,{size:"lg",variant:"subtle",onClick:()=>U("expanded",!p),children:p?e.jsx(ke,{size:20}):e.jsx($e,{size:20})})}),e.jsx(Q,{label:I?"Sort descending":"Sort ascending",children:e.jsx(K,{size:"lg",variant:"subtle",onClick:()=>U("sort",I?"desc":"asc"),children:I?e.jsx(qe,{size:20}):e.jsx(Be,{size:20})})})]}),e.jsxs(u,{style:{flex:1},children:[e.jsx(te,{placeholder:"Search indices...",leftSection:e.jsx(ge,{size:16}),value:$,onChange:a=>A(a.currentTarget.value,void 0,void 0),style:{flex:1,maxWidth:300}}),e.jsx(me,{placeholder:"Health",data:["green","yellow","red"],value:N,onChange:a=>A(void 0,a,void 0),clearable:!0,style:{maxWidth:200}}),e.jsx(me,{placeholder:"Status",data:["open","close"],value:T,onChange:a=>A(void 0,void 0,a),clearable:!0,style:{maxWidth:150}}),r&&e.jsx(he,{label:"Show only affected",checked:w,onChange:a=>U("affected",a.currentTarget.checked)})]}),d&&e.jsx(Y,{leftSection:e.jsx(we,{size:16}),onClick:()=>P(`/cluster/${d}/indices/create`),children:"Create Index"})]}),O&&O.length===0?e.jsx(l,{c:"dimmed",ta:"center",py:"xl",children:"No indices match your filters"}):e.jsx(je,{children:e.jsxs(t,{striped:!0,highlightOnHover:!0,children:[e.jsx(t.Thead,{children:e.jsxs(t.Tr,{children:[e.jsx(t.Th,{children:"Name"}),e.jsx(t.Th,{children:"Health"}),e.jsx(t.Th,{children:"Status"}),e.jsx(t.Th,{children:"Documents"}),e.jsx(t.Th,{children:"Size"}),e.jsx(t.Th,{children:"Shards"}),p&&e.jsx(t.Th,{children:"Primaries"}),p&&e.jsx(t.Th,{children:"Replicas"}),e.jsx(t.Th,{children:"Unassigned"}),e.jsx(t.Th,{children:"Actions"})]})}),e.jsx(t.Tbody,{children:O==null?void 0:O.map(a=>{var b;const c=((b=f[a.name])==null?void 0:b.length)||0;return e.jsxs(t.Tr,{style:{cursor:"pointer"},onClick:()=>P(`/cluster/${d}/indices/${encodeURIComponent(a.name)}/edit`),children:[e.jsx(t.Td,{children:e.jsxs(S,{gap:2,children:[e.jsx(l,{size:"sm",fw:500,style:{textDecoration:"underline"},children:a.name}),p&&_(a.name)&&e.jsx(L,{size:"xs",color:"yellow",variant:"light",children:"Has Issues"})]})}),e.jsx(t.Td,{children:e.jsx(L,{size:"sm",color:ve(a.health),children:a.health})}),e.jsx(t.Td,{children:e.jsx(L,{size:"sm",variant:"light",color:a.status==="open"?"green":"gray",children:a.status})}),e.jsx(t.Td,{children:e.jsx(l,{size:"sm",children:a.docsCount.toLocaleString()})}),e.jsx(t.Td,{children:e.jsx(l,{size:"sm",children:R(a.storeSize)})}),e.jsx(t.Td,{children:e.jsx(l,{size:"sm",children:p?`${a.primaryShards+a.replicaShards}`:`${a.primaryShards}p / ${a.replicaShards}r`})}),p&&e.jsx(t.Td,{children:e.jsx(l,{size:"sm",children:a.primaryShards})}),p&&e.jsx(t.Td,{children:e.jsx(l,{size:"sm",children:a.replicaShards})}),e.jsx(t.Td,{children:c>0?e.jsx(L,{size:"sm",color:"red",variant:"filled",children:c}):e.jsx(l,{size:"sm",c:"dimmed",children:"-"})}),e.jsx(t.Td,{onClick:M=>M.stopPropagation(),children:e.jsxs(u,{gap:"xs",children:[d&&e.jsx(Qe,{clusterId:d,index:a}),e.jsxs(j,{shadow:"md",width:200,children:[e.jsx(j.Target,{children:e.jsx(K,{variant:"subtle",color:"gray",children:e.jsx(Me,{size:16})})}),e.jsxs(j.Dropdown,{children:[e.jsx(j.Label,{children:"Index Management"}),e.jsx(j.Item,{leftSection:e.jsx(Ae,{size:14}),onClick:M=>{M.stopPropagation(),P(`/cluster/${d}/indices/${encodeURIComponent(a.name)}/edit?tab=settings`)},children:"Settings"}),e.jsx(j.Item,{leftSection:e.jsx(Le,{size:14}),onClick:M=>{M.stopPropagation(),P(`/cluster/${d}/indices/${encodeURIComponent(a.name)}/edit?tab=mappings`)},children:"Mappings"})]})]})]})})]},a.name)})})]})})]})}function _e({nodes:o,indices:i,shards:C,loading:d,error:P}){const{id:k}=xe(),z=ye(),n=fe(),[$,N]=ie(),T=$.get("overviewSearch")||"",p=$.get("showClosed")==="true",I=$.get("showSpecial")==="true",w=$.get("overviewExpanded")==="true",s=$.get("overviewAffected")==="true",h=pe(T,300),x=(r,g)=>{const m=new URLSearchParams($);g===""||g===!1?m.delete(r):m.set(r,String(g)),N(m)},{data:E}=J({queryKey:["cluster",k,"settings"],queryFn:async()=>await F.proxyRequest(k,"GET","/_cluster/settings"),enabled:!!k}),v=(()=>{var oe,ce;if(!E)return!0;const r=E.transient,g=E.persistent,m=r==null?void 0:r.cluster,a=g==null?void 0:g.cluster,c=m==null?void 0:m.routing,b=a==null?void 0:a.routing,M=(oe=c==null?void 0:c.allocation)==null?void 0:oe.enable,Z=(ce=b==null?void 0:b.allocation)==null?void 0:ce.enable;return(M||Z||"all")==="all"})(),D=q({mutationFn:()=>F.proxyRequest(k,"PUT","/_cluster/settings",{transient:{"cluster.routing.allocation.enable":"all"}}),onSuccess:()=>{n.invalidateQueries({queryKey:["cluster",k,"settings"]}),y.show({title:"Success",message:"Shard allocation enabled",color:"green"})},onError:r=>{y.show({title:"Error",message:`Failed to enable shard allocation: ${r.message}`,color:"red"})}}),A=q({mutationFn:r=>F.proxyRequest(k,"PUT","/_cluster/settings",{transient:{"cluster.routing.allocation.enable":r}}),onSuccess:()=>{n.invalidateQueries({queryKey:["cluster",k,"settings"]}),y.show({title:"Success",message:"Shard allocation disabled",color:"green"})},onError:r=>{y.show({title:"Error",message:`Failed to disable shard allocation: ${r.message}`,color:"red"})}});if(d)return e.jsx(u,{justify:"center",py:"xl",children:e.jsx(ae,{})});if(P)return e.jsxs(ee,{icon:e.jsx(se,{size:16}),title:"Error",color:"red",children:["Failed to load shard allocation data: ",P.message]});if(!o||!i||!C||o.length===0||i.length===0)return e.jsx(S,{gap:"md",align:"center",py:"xl",children:e.jsx(l,{c:"dimmed",children:"No shard allocation data available"})});const U=C.filter(r=>r.state==="UNASSIGNED"),re=U.reduce((r,g)=>(r[g.index]||(r[g.index]=[]),r[g.index].push(g),r),{}),X=r=>C.filter(m=>m.index===r).some(m=>m.state==="UNASSIGNED"||m.state==="RELOCATING"||m.state==="INITIALIZING");let f=i.filter(r=>{const g=r.name.toLowerCase().includes(h.toLowerCase()),m=p||r.status==="open",a=I||!r.name.startsWith("."),c=!s||X(r.name);return g&&m&&a&&c});const _=new Map;o.forEach(r=>{_.set(r.id,r.name),_.set(r.name,r.name),r.ip&&_.set(r.ip,r.name)});const O=new Map;return C.forEach(r=>{if(!r.node)return;const g=_.get(r.node);if(!g)return;O.has(g)||O.set(g,new Map);const m=O.get(g);m.has(r.index)||m.set(r.index,[]),m.get(r.index).push(r)}),e.jsxs(S,{gap:"md",children:[e.jsxs(u,{justify:"space-between",wrap:"wrap",children:[e.jsxs(u,{children:[v?e.jsxs(j,{shadow:"md",width:200,children:[e.jsx(j.Target,{children:e.jsx(Q,{label:"Disable shard allocation",children:e.jsx(K,{size:"lg",variant:"subtle",color:"green",loading:A.isPending,children:e.jsx(Ie,{size:20})})})}),e.jsxs(j.Dropdown,{children:[e.jsx(j.Label,{children:"Disable Allocation"}),e.jsx(j.Item,{onClick:()=>A.mutate("none"),children:e.jsxs(u,{gap:"xs",children:[e.jsx(H,{size:14}),e.jsx(l,{size:"sm",children:"None (default)"})]})}),e.jsx(j.Item,{onClick:()=>A.mutate("primaries"),children:e.jsxs(u,{gap:"xs",children:[e.jsx(H,{size:14}),e.jsx(l,{size:"sm",children:"Primaries only"})]})}),e.jsx(j.Item,{onClick:()=>A.mutate("new_primaries"),children:e.jsxs(u,{gap:"xs",children:[e.jsx(H,{size:14}),e.jsx(l,{size:"sm",children:"New primaries only"})]})})]})]}):e.jsx(Q,{label:"Enable shard allocation",children:e.jsx(K,{size:"lg",variant:"subtle",color:"red",onClick:()=>D.mutate(),loading:D.isPending,children:e.jsx(H,{size:20})})}),e.jsx(Q,{label:w?"Compress view":"Expand view",children:e.jsx(K,{size:"lg",variant:"subtle",onClick:()=>x("overviewExpanded",!w),children:w?e.jsx(ke,{size:20}):e.jsx($e,{size:20})})})]}),e.jsxs(u,{style:{flex:1},children:[e.jsx(te,{placeholder:"Filter indices by name or alias...",leftSection:e.jsx(ge,{size:16}),value:T,onChange:r=>x("overviewSearch",r.currentTarget.value),style:{flex:1,maxWidth:400}}),e.jsxs(u,{gap:"md",children:[e.jsxs(u,{gap:"xs",children:[e.jsx("input",{type:"checkbox",id:"overview-show-closed",checked:p,onChange:r=>x("showClosed",r.target.checked)}),e.jsxs(l,{size:"sm",component:"label",htmlFor:"overview-show-closed",style:{cursor:"pointer"},children:["closed (",i.filter(r=>r.status!=="open").length,")"]})]}),e.jsxs(u,{gap:"xs",children:[e.jsx("input",{type:"checkbox",id:"overview-show-special",checked:I,onChange:r=>x("showSpecial",r.target.checked)}),e.jsxs(l,{size:"sm",component:"label",htmlFor:"overview-show-special",style:{cursor:"pointer"},children:["special (",i.filter(r=>r.name.startsWith(".")).length,")"]})]}),U.length>0&&e.jsx(he,{label:"Show only affected",checked:s,onChange:r=>x("overviewAffected",r.currentTarget.checked)}),e.jsxs(l,{size:"sm",c:"dimmed",children:[f.length," of ",i.length]})]})]})]}),e.jsxs(u,{gap:"md",children:[e.jsxs(l,{size:"sm",children:[e.jsx(l,{component:"span",fw:700,children:o.length})," nodes"]}),e.jsxs(l,{size:"sm",children:[e.jsx(l,{component:"span",fw:700,children:f.length})," indices"]}),e.jsxs(l,{size:"sm",children:[e.jsx(l,{component:"span",fw:700,children:C.length})," shards"]}),U.length>0&&e.jsxs(L,{color:"red",variant:"filled",children:[U.length," unassigned"]})]}),e.jsx(je,{children:e.jsx("div",{style:{minWidth:"800px"},children:e.jsxs(t,{striped:!0,withTableBorder:!0,withColumnBorders:!0,children:[e.jsx(t.Thead,{children:e.jsxs(t.Tr,{children:[e.jsx(t.Th,{style:{width:"120px",minWidth:"120px",maxWidth:"120px",position:"sticky",left:0,backgroundColor:"var(--mantine-color-body)",zIndex:1},children:"Node"}),f.map(r=>e.jsx(t.Th,{style:{minWidth:"120px",textAlign:"center"},children:e.jsxs(S,{gap:4,children:[e.jsx(l,{size:"xs",fw:500,truncate:"end",title:r.name,style:{cursor:"pointer",textDecoration:"underline"},onClick:g=>{g.stopPropagation(),z(`/cluster/${k}/indices/${encodeURIComponent(r.name)}/edit`)},children:r.name}),e.jsxs(u,{gap:4,justify:"center",children:[e.jsxs(L,{size:"xs",color:ve(r.health),variant:"dot",children:[r.primaryShards,"Ã—",r.replicaShards+1]}),e.jsx(l,{size:"xs",c:"dimmed",children:R(r.storeSize)})]})]})},r.name))]})}),e.jsxs(t.Tbody,{children:[U.length>0&&e.jsxs(t.Tr,{style:{backgroundColor:"var(--mantine-color-red-0)"},children:[e.jsx(t.Td,{style:{width:"120px",minWidth:"120px",maxWidth:"120px",position:"sticky",left:0,backgroundColor:"var(--mantine-color-red-0)",zIndex:1},children:e.jsxs(S,{gap:2,children:[e.jsx(l,{size:"xs",fw:700,c:"red",children:"Unassigned"}),e.jsx(L,{size:"xs",color:"red",variant:"filled",children:U.length})]})}),f.map(r=>{const g=re[r.name]||[];return e.jsx(t.Td,{style:{padding:"4px",textAlign:"center",backgroundColor:ze(r.health)},children:g.length>0?e.jsx(u,{gap:2,justify:"center",wrap:"wrap",children:g.map((m,a)=>e.jsx(Q,{label:e.jsxs("div",{children:[e.jsxs("div",{children:["Shard: ",m.shard]}),e.jsxs("div",{children:["Type: ",m.primary?"Primary":"Replica"]}),e.jsx("div",{children:"State: UNASSIGNED"})]}),children:e.jsx("div",{style:{width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"var(--mantine-color-red-6)",color:"white",fontSize:"10px",fontWeight:600,borderRadius:"2px",border:m.primary?"2px solid var(--mantine-color-red-9)":"2px dashed var(--mantine-color-red-9)"},children:m.shard})},`unassigned-${m.index}-${m.shard}-${a}`))}):e.jsx(l,{size:"xs",c:"dimmed",children:"-"})},`unassigned-${r.name}`)})]}),o.map(r=>{const g=O.get(r.name);return e.jsxs(t.Tr,{children:[e.jsx(t.Td,{style:{width:"120px",minWidth:"120px",maxWidth:"120px",position:"sticky",left:0,backgroundColor:"var(--mantine-color-body)",zIndex:1},children:e.jsxs(S,{gap:4,children:[e.jsx(u,{gap:4,children:e.jsx(l,{size:"xs",fw:500,truncate:"end",title:r.name,children:r.name})}),e.jsx(l,{size:"xs",c:"dimmed",truncate:"end",title:r.ip,children:r.ip}),w&&e.jsxs(e.Fragment,{children:[e.jsx(u,{gap:4,wrap:"wrap",children:r.roles.map(m=>e.jsx(L,{size:"xs",variant:"light",color:"gray",children:m},m))}),e.jsxs(u,{gap:4,wrap:"wrap",children:[e.jsx(L,{size:"xs",color:"teal",variant:"filled",children:r.id.substring(0,8)}),e.jsx(L,{size:"xs",color:"teal",variant:"filled",children:r.roles.length}),e.jsx(L,{size:"xs",color:"teal",variant:"filled",children:R(r.heapMax)}),e.jsx(L,{size:"xs",color:"teal",variant:"filled",children:R(r.diskTotal)}),r.cpuPercent!==void 0&&e.jsxs(L,{size:"xs",color:"teal",variant:"filled",children:[r.cpuPercent,"%"]})]})]})]})}),f.map(m=>{const a=(g==null?void 0:g.get(m.name))||[];return e.jsx(t.Td,{style:{padding:"4px",textAlign:"center",backgroundColor:ze(m.health)},children:a.length>0?e.jsx(u,{gap:2,justify:"center",wrap:"wrap",children:a.map((c,b)=>e.jsx("div",{style:{width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:c.state==="STARTED"?c.primary?"var(--mantine-color-green-6)":"var(--mantine-color-green-7)":c.state==="RELOCATING"?"var(--mantine-color-yellow-6)":"var(--mantine-color-red-6)",color:"white",fontSize:"10px",fontWeight:600,borderRadius:"2px",border:c.primary?"2px solid var(--mantine-color-green-9)":"2px dashed var(--mantine-color-green-9)"},title:`Shard ${c.shard} (${c.primary?"Primary":"Replica"}) - ${c.state}`,children:c.shard},`${c.shard}-${c.primary}-${b}`))}):e.jsx(l,{size:"xs",c:"dimmed",children:"-"})},`${r.id}-${m.name}`)})]},r.id)})]})]})})})]})}function Ze({shards:o,loading:i,error:C}){var w;const[d,P]=ie(),k=d.get("shardsSearch")||"",z=((w=d.get("shardStates"))==null?void 0:w.split(",").filter(Boolean))||[],n=d.get("primaryOnly")==="true",$=d.get("replicaOnly")==="true",N=pe(k,300),T=(s,h,x,E)=>{const v=new URLSearchParams(d);s!==void 0&&(s?v.set("shardsSearch",s):v.delete("shardsSearch")),h!==void 0&&(h.length>0?v.set("shardStates",h.join(",")):v.delete("shardStates")),x!==void 0&&(x?(v.set("primaryOnly","true"),v.delete("replicaOnly")):v.delete("primaryOnly")),E!==void 0&&(E?(v.set("replicaOnly","true"),v.delete("primaryOnly")):v.delete("replicaOnly")),P(v)},p=o==null?void 0:o.filter(s=>{var v;const h=s.index.toLowerCase().includes(N.toLowerCase())||((v=s.node)==null?void 0:v.toLowerCase().includes(N.toLowerCase())),x=z.length===0||z.includes(s.state),E=!n&&!$||n&&s.primary||$&&!s.primary;return h&&x&&E});if(i)return e.jsx(u,{justify:"center",py:"xl",children:e.jsx(ae,{})});if(C)return e.jsxs(ee,{icon:e.jsx(se,{size:16}),title:"Error",color:"red",children:["Failed to load shards: ",C.message]});if(!o||o.length===0)return e.jsx(l,{c:"dimmed",children:"No shards found"});const I=(p||[]).reduce((s,h)=>(s[h.state]||(s[h.state]=[]),s[h.state].push(h),s),{});return e.jsxs(S,{gap:"md",children:[e.jsxs(u,{wrap:"wrap",children:[e.jsx(te,{placeholder:"Search by index or node...",leftSection:e.jsx(ge,{size:16}),value:k,onChange:s=>T(s.currentTarget.value,void 0,void 0,void 0),style:{flex:1,maxWidth:300}}),e.jsx(me,{placeholder:"State",data:["STARTED","INITIALIZING","RELOCATING","UNASSIGNED"],value:z,onChange:s=>T(void 0,s,void 0,void 0),clearable:!0,style:{maxWidth:250}}),e.jsxs(u,{gap:"md",children:[e.jsx(he,{label:"Primary only",checked:n,onChange:s=>T(void 0,void 0,s.currentTarget.checked,void 0)}),e.jsx(he,{label:"Replica only",checked:$,onChange:s=>T(void 0,void 0,void 0,s.currentTarget.checked)})]})]}),e.jsx(G,{children:Object.entries(I).map(([s,h])=>e.jsx(G.Col,{span:{base:12,sm:6,md:3},children:e.jsx(V,{shadow:"sm",padding:"md",children:e.jsxs(S,{gap:"xs",children:[e.jsx(l,{size:"sm",c:"dimmed",children:s}),e.jsx(l,{size:"xl",fw:700,children:h.length})]})})},s))}),p&&p.length===0?e.jsx(l,{c:"dimmed",ta:"center",py:"xl",children:"No shards match your filters"}):e.jsxs(je,{children:[e.jsxs(t,{striped:!0,highlightOnHover:!0,children:[e.jsx(t.Thead,{children:e.jsxs(t.Tr,{children:[e.jsx(t.Th,{children:"Index"}),e.jsx(t.Th,{children:"Shard"}),e.jsx(t.Th,{children:"Type"}),e.jsx(t.Th,{children:"State"}),e.jsx(t.Th,{children:"Node"}),e.jsx(t.Th,{children:"Documents"}),e.jsx(t.Th,{children:"Size"})]})}),e.jsx(t.Tbody,{children:p==null?void 0:p.slice(0,100).map((s,h)=>{var x;return e.jsxs(t.Tr,{children:[e.jsx(t.Td,{children:e.jsx(l,{size:"sm",children:s.index})}),e.jsx(t.Td,{children:e.jsx(l,{size:"sm",children:s.shard})}),e.jsx(t.Td,{children:e.jsx(L,{size:"sm",variant:"light",color:s.primary?"blue":"gray",children:s.primary?"Primary":"Replica"})}),e.jsx(t.Td,{children:e.jsx(L,{size:"sm",color:s.state==="STARTED"?"green":s.state==="UNASSIGNED"?"red":"yellow",children:s.state})}),e.jsx(t.Td,{children:e.jsx(l,{size:"sm",children:s.node||"N/A"})}),e.jsx(t.Td,{children:e.jsx(l,{size:"sm",children:((x=s.docs)==null?void 0:x.toLocaleString())||"N/A"})}),e.jsx(t.Td,{children:e.jsx(l,{size:"sm",children:s.store?R(s.store):"N/A"})})]},`${s.index}-${s.shard}-${h}`)})})]}),p&&p.length>100&&e.jsxs(l,{size:"sm",c:"dimmed",ta:"center",mt:"md",children:["Showing first 100 of ",p.length," shards"]})]})]})}export{ps as ClusterView};
