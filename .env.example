# Secan Configuration via Environment Variables
#
# Configuration system uses config-rs with hierarchical environment variable support.
# This file demonstrates all available SECAN_* environment variables.
#
# Precedence (highest to lowest):
# 1. Environment variables (SECAN_*)
# 2. Configuration files (config.yaml, config.local.yaml)
# 3. Default values (hardcoded)
#
# NOTE: For complex configurations (authentication, multiple clusters),
# using config.yaml is RECOMMENDED as environment variables have limitations
# with nested arrays. See config.example.yaml for complete examples.

# ============================================================================
# SERVER CONFIGURATION
# ============================================================================

# Server bind address
# Default: 0.0.0.0
SECAN_SERVER_HOST=0.0.0.0

# Server port
# Default: 27182
SECAN_SERVER_PORT=27182


# ============================================================================
# AUTHENTICATION CONFIGURATION
# ============================================================================

# Authentication mode: open, local_users, or oidc
# Default: open
SECAN_AUTH_MODE=open

# Session timeout in minutes
# Default: 60
SECAN_AUTH_SESSION_TIMEOUT_MINUTES=60

# ============================================================================
# LOCAL USERS AUTHENTICATION (via environment variables)
# ============================================================================
# 
# To enable local user authentication via environment variables:
# Format: SECAN_AUTH_LOCAL_USERS_<INDEX>_<FIELD>
# 
# Example below shows 2 users with bcrypt password hashes.
# Generate hashes with: python3 -c "import bcrypt; print(bcrypt.hashpw(b'password', bcrypt.gensalt(12)).decode())"
#
# NOTE: This approach uses config-rs array indexing which is supported for all nested arrays,
# including local_users. The separator "_" maps array indices like SECAN_AUTH_LOCAL_USERS_0_...
#

# First user (index 0)
SECAN_AUTH_LOCAL_USERS_0_USERNAME=admin
SECAN_AUTH_LOCAL_USERS_0_PASSWORD_HASH=$2b$12$R9h7cIPz0gi.URNNX3kh2OPST9/PgBkqquzi.Ss7KIUgO2t0jKMm6
SECAN_AUTH_LOCAL_USERS_0_GROUPS_0=admin

# Second user (index 1)
SECAN_AUTH_LOCAL_USERS_1_USERNAME=viewer
SECAN_AUTH_LOCAL_USERS_1_PASSWORD_HASH=$2b$12$example_hash_here
SECAN_AUTH_LOCAL_USERS_1_GROUPS_0=viewer

# ============================================================================
# PERMISSION MAPPINGS (via environment variables)
# ============================================================================
#
# Map groups to cluster permissions
# Format: SECAN_AUTH_PERMISSIONS_<INDEX>_<FIELD>
#

# Admin group - full access to all clusters
# SECAN_AUTH_PERMISSIONS_0_GROUP=admin
# SECAN_AUTH_PERMISSIONS_0_CLUSTERS_0=*

# Viewer group - access to specific clusters only
# SECAN_AUTH_PERMISSIONS_1_GROUP=viewer
# SECAN_AUTH_PERMISSIONS_1_CLUSTERS_0=local
# SECAN_AUTH_PERMISSIONS_1_CLUSTERS_1=staging


# ============================================================================
# CLUSTER CONFIGURATION (VIA ENVIRONMENT VARIABLES)
# ============================================================================
#
# Format: SECAN_CLUSTERS_<INDEX>_<FIELD>
#

# First cluster (index 0) - Local development
SECAN_CLUSTERS_0_ID=local
SECAN_CLUSTERS_0_NAME=Local Elasticsearch
SECAN_CLUSTERS_0_NODES_0=http://localhost:9200
SECAN_CLUSTERS_0_ES_VERSION=8

# Second cluster (index 1) - Production example
# SECAN_CLUSTERS_1_ID=production
# SECAN_CLUSTERS_1_NAME=Production Cluster
# SECAN_CLUSTERS_1_NODES_0=http://es1.example.com:9200
# SECAN_CLUSTERS_1_NODES_1=http://es2.example.com:9200
# SECAN_CLUSTERS_1_AUTH_TYPE=basic
# SECAN_CLUSTERS_1_AUTH_USERNAME=elastic
# SECAN_CLUSTERS_1_AUTH_PASSWORD=password
# SECAN_CLUSTERS_1_ES_VERSION=8


# ============================================================================
# CACHE CONFIGURATION
# ============================================================================

# Cluster metadata cache duration in seconds
# Default: 30
SECAN_CACHE_METADATA_DURATION_SECONDS=30


# ============================================================================
# LOGGING CONFIGURATION
# ============================================================================

# Log level: trace, debug, info, warn, or error
# Default: info
# Note: This is set via RUST_LOG, not SECAN_LOG_LEVEL
RUST_LOG=info
